!(function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.cubec=e()})(this,(function(){"use strict";var s={DEFAULT_OPTION:{data:{},verify:{}},IGNORE_KEYWORDS:["name","data","store","change","events","verify","filter","lock"],EMULATEHTTP:{get:"GET",send:"GET",post:"POST",sync:"POST",put:"POST",delete:"POST",patch:"POST",fetch:"GET"}},f={MODEL_UNEXPECT:"unexpect c.model with only data that accepts a standard JSON type object.",VIEW_MISSING_ROOT:"unexpect c.view must defined real root element node",ATOM_UNDEFINED_MODELNAME:"unexpect model name that atom can find it",ATOM_MISSING_MODELINSTANCE:"can not find target modal with atom.swap"};function p(){return self||window||this}p.VERSION="4.2.6";var t={},e=[],n="",r=e.slice,a=t.toString,i=n.trim,o=e.concat,h=eval,u=Object.freeze({}),c=p();function l(t,e){p[e]=function(){return t}}function d(e,t){p[t]=function(t){return e[Ve(W(t).toLowerCase())]||e.default}}function v(n,t,r){return at(t,r?function(t,e){(T(r)?ht(r,e):null!=r&&e===r)||(n[e]=t)}:function(t,e){n[e]=t}),n}function m(t,e,n){return v(v(D(t)?[]:{},t),e,n)}function g(t,e,n){return x(e)?Object.defineProperties(t,e):Object.defineProperty(t,e,n)}function y(t){var e=et(arguments,1);return function(){return t.apply(null,e.concat(et(arguments)))}}function b(t,e){return function(){return(e.apply(null,arguments)?t:X).apply(null,arguments)}}function _(t){return"function"==typeof t}function x(t){return!!t&&("object"==typeof t||_(t))}function E(t){return"string"==typeof t||t+""===t}function S(t){return"boolean"==typeof t&&!!t===t}function O(t){return"number"==typeof t&&t===+t}function k(t){return null==t||"object"!=typeof t}function w(t){return t&&A(t,"RegExp")}var T=Array.isArray,N=/^[a-z$_]+[a-z$_0-9]*$/i;function M(t){return null!=t&&N.test(t)}function P(t){return 0 in arguments&&void 0!==t}function A(t,e){return a.call(t)==="[object "+e+"]"}function D(t){return!!t&&!_(t)&&x(t)&&O(t.length)}function R(t){return"number"==typeof t&&t!=t}function j(t){return+t===t&&t%1==0}function I(t){return+t===t&&t%1!=0}function C(t){return t instanceof Date}function L(t){return E(t)?!Fn(t):k(t)||!Fn(t)}function q(t){return x(t)&&0<t.nodeType&&(t instanceof Node||t instanceof Element)}function z(t){return t instanceof Element}function U(t){return t instanceof Node}function F(t){var e=Function.prototype.toString,n=Object.prototype.hasOwnProperty,r=RegExp("^"+e.call(n).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");try{var i=e.call(t);return r.test(i)}catch(t){return!1}}var H=["array","function","null","undefined","arguments","boolean","string","number","date","regexp","nodeList","htmlcollection"];function J(t){var e=[T(t),_(t),null===t,void 0===t,A(t,"Arguments"),A(t,"Boolean"),A(t,"String"),A(t,"Number"),A(t,"Date"),A(t,"RegExp"),A(t,"NodeList"),A(t,"HTMLCollection")];return H[xt(e,Dt(!0))]||"object"}function $(t){return t}function G(){}function X(t){return t}function W(t){return null!=t?_(t.toString)?t.toString():t+"":""}function Y(t){return+t&&"number"==typeof+t?+t:t>>0}function V(t){var e=parseInt(~t.indexOf("#")?t.substr(1):t,16);return{r:e>>16,g:(65280&e)>>8,b:255&e}}function K(t){return((1<<24)+(t.r<<16)+(t.g<<8)+t.b).toString(16).substr(1)}function B(t){var e=[];return x(t)||A(t,"String")?e=Jn(t):null!=t&&e.push(t),e}function Q(t){return-Y(t)}function Z(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function tt(){return et(arguments)}function et(t,e,n){return D(t)?r.call(t,e,n):[]}function nt(t){return null!=t?T(t)||E(t)?Tt(Object.keys(t),Y):Object.keys(t):[]}function rt(t,e){return void 0===e?t:function(){return t.apply(e,arguments)}}function it(t,e,n){var r,i=t.length,o=rt(e,n);for(r=0;r<i;r++)o(t[r],r,t);return t}function ot(e,n,t){return it(nt(e),(function(t){n.call(this,e[t],t,e)}),t),e}function at(t,e,n){return D(t)?it(t,e,n):x(t)&&null!==t?ot(t,e,n):t}function ut(t,e){if(D(t))return et(t);if(x(t)&&e){var n,r,i=nt(t),o={};for(n=i.length;n--;)o[r=i[n]]=t[r];return o}return k(t)?t:JSON.parse(JSON.stringify(t))}var ct=function(){};function st(t){var e=t;if(D(t))e=et(t).map(b(st,Gn(k)));else if(!(k(t)||t instanceof Node)){ot(t,(function(t,e){this[e]=k(t)?t:st(t)}),e=(ct.prototype=t.constructor.prototype)!==Object.prototype?new ct:{})}return e}function ft(t,e){return t.test(e)}function lt(t,e,n,r){var i=2 in arguments,o=rt(e,r);return n=i?n:kt(t),et(t,i?0:1).reduce(o,n)}function pt(t,e,n,r){var i=2 in arguments,o=rt(e,r);return n=i?n:wt(t),et(t,0,i?void 0:-1).reduceRight(o,n)}function ht(t,e,n){var r,i=w(e)?ft:n?Se:Pt,o=!1;if(D(t))for(r=t.length;r--&&!(o=i(e,t[r])););else if(x(t)){var a=nt(t);for(r=a.length;r--&&!(o=i(e,t[a[r]])););}return o}function dt(t,e,n){return ht(nt(t),e,n)}function vt(t,e,n){return n?t.splice(e,1):delete t[e]}function mt(t,e,n){for(var r=w(e)?ft:n?Se:Pt,i=T(t),o=nt(t),a=0;a<o.length;a++)r(e,t[o[a]])&&vt(t,o[a],i)&&i&&(o.pop(),a--);return t}function gt(t,e,r){var n=[],i=w(e)?y(ft,e):_(e)?e:Dt(e);return at(ut(t),(function(t,e,n){i.apply(n,arguments)&&this.push(r?e:t)}),n),n}function yt(t,e,n){return gt(t,Gn(e),n)}function bt(t,e){var n,r,i=!0;for(r=(n=nt(t)).length;r--&&(i=e(t[n[r]],n[r],t)););return i}function _t(t,e){var n,r,i=!1;for(r=(n=nt(t)).length;r--&&!(i=e(t[n[r]],n[r],t)););return i}function xt(t,e){var n=gt(t,e,!0);return 1===n.length?n.pop():n.length?n:null}function Et(t,e){var n=xt(t,e);return k(n)?n:n.pop()}function St(t,e){var n=xt(t,e);return k(n)?n:n.shift()}function Ot(t,e){var n=St(t,e);return null===n?n:t[n]}function kt(t){return D(t)?t[0]:t}function wt(t){return D(t)?t[t.length-1]:t}function Tt(t,r){var e=D(t),i=e?[]:{};return(e?it:ot)(t,(function(t,e,n){i[e]=this?r.call(n,t,e,n):t[r]}),_(r)),i}function Nt(e,n){var r={};return ot(e,(function(t){r[n.apply(e,arguments)]=t})),r}function Mt(t,e){var n,r,i=[],o=w(e)?y(ft,e):_(e)?e:Dt(e);if(T(t))for(n=0,r=t.length;n<r;n++)o.call(t,t[n],n,t)&&i.push(t.splice(n,1).pop(n--));else if(x(t)){var a;for(a in t)if(o.call(t,t[a],a,t)){var u={};u[a]=t[a],i.push(u),delete t[a]}}return i}function Pt(t,e){return t===e}function At(t,e){return t!==e}function Dt(e){return function(t){return t===e}}function Rt(t){for(var e={},n=O(kt(t)),r=0;r<t.length;r++)e[t[r]]||(e[t[r]]=!0);return Tt(nt(e),n?Y:X)}function jt(t,e){for(var n,r=et(t),i=e?Se:Pt,o=[],a=0;a<r.length;a++)if(void 0!==r[a])for(o.push(r[a]),n=a+1;n<r.length;n++)i(r[a],r[n])&&(r[n]=void 0);return o}function It(t,e){var n=_(e);return Tt(t,(function(t){return(n?e:t[e]).apply(t,arguments)}))}function Ct(t,e,n){var r=[],i=W(e);return at(t,(function(t){var e=Ln(t,i,n);return void 0!==e&&this.push(e)}),r),r}function Lt(t,n){var e={},r=_(n);return at(t,(function(t){var e=r?n(t):Ln(t,n);e&&(this[e]?this[e].push(t):this[e]=[t])}),e),e}function qt(t,n){var r={},i=_(n);return at(t,(function(t){var e=i?n(t):Ln(t,n);e&&(r[e]?this[e]+=1:this[e]=1)}),r),r}function zt(t){var e,n,r=[],i=nt(t);for(e=0,n=i.length;e<n;e++)r.push([i[e],t[i[e]]]);return r}function Ut(t){var e,n,r={};for(e=0,n=t.length;e<n;e++)r[t[e][0]]=t[e][1];return r}function Ft(t){return gt(t,Gn(y(ht,oe(et(arguments,1),!0))))}function Ht(t){var n=oe(et(arguments,1),!0);return gt(t,(function(t,e){return!ht(n,e)}))}var Jt=mt;function $t(t){for(var e,n=t.length,r=new Array(n),i=0;i<n;i++)(e=fe(0,i))!==i&&(r[i]=r[e]),r[e]=t[i];return r}function Gt(t,e){var n,r,i=parseInt(Y(e))||2,o=[];for(n=0,r=t.length;n<r;n+=i)o.push(t.slice(n,n+i));return o}function Xt(t){return gt(t,X)}function Wt(){return o.apply([],arguments)}function Yt(u){return function(){var t,e,n,r=[],i=!0,o=Wt.apply([],arguments),a=u?Se:Pt;for(t=0;t<o.length;t++){for(n=o[t],e=0;e<o.length;e++)if(t!==e&&a(n,o[e])){i=!1;break}i&&r.push(n),i=!0}return r}}var Vt=Yt(),Kt=Yt(!0);function Bt(u){return function(){var t,e,n,r,i=et(arguments[0]),o=arguments.length,a=[];for(t=0;t<i.length;t++)if(r=!0,!ht(a,n=i[t],u)){for(e=1;e<o;e++)if(!ht(arguments[e],n,u)){r=!1;break}r&&a.push(n)}return a}}var Qt=Bt(),Zt=Bt(!0);function te(t,e){return!k(t)&&!k(e)&&(A(t,"Object")&&A(e,"Object")||D(t)&&D(e))}function ee(t){var e,n=et(arguments);return T(t)?lt(n,(function(i,t){return it(t,(function(t,e){var n=i[e],r=t;i[e]=te(n,r)?ee(n,r):r})),e=i}),[]):x(t)&&lt(n,(function(r,i){return it(nt(i),(function(t){var e=r[t],n=i[t];r[t]=te(e,n)?ee(e,n):n})),e=r}),{}),e}function ne(t,e){return et(t,Y(e)||1)}function re(t,e){return et(t,0,-(Y(e)||1))}function ie(t,e){var n,r=et(t),i=void 0===this?"shift":"pop",o=w(e)?y(ft,e):_(e)?e:Dt(e);for(n=r.length;n--&&!o(r[i]()););return r}function oe(){var t=Wt.apply([],arguments),n=!!A(wt(t),"Boolean")&&t.pop();return lt(et(t),(function(t,e){return t.concat(n&&T(e)?oe(e,n):e)}),[])}var ae="0123456789",ue="abcdefghijklmnopqrstuvwxyz",ce=ue.toUpperCase(),se="~`!@#$%^&*(){}[]-+=_|/.,><:;";function fe(t,e){return O(e)||(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}function le(t,e,n){O(e)||(e=t,t=0);var r=Math.random()*(e-t)+t;return Y(n)?+r.toFixed(n):r}function pe(t){return 100*Math.random()<Math.max(1,Math.min(Y(t||50),99))}function he(t,e){var n=t?ae+se:"";return(n=(e?ce:ue)+n).charAt(fe(0,Fn(n)-1))}function de(t){return(t?"#":"")+K({r:fe(0,255),g:fe(0,255),b:fe(0,255)})}function ve(t,e,n){for(var r=Y(t)||2,i=[];r--;)i[r]=he(e,n);return i.join("")}function me(){var t=Hn();return new Date(t+(pe()?X:Q)(fe(0,t)))}function ge(t){return fe(1,(t=0<Y(t)?Y(t):2)%2==0?t:t+1)}function ye(t,e){var n=et(arguments,2),r=Or[e]||Or.default;return Tt(or(t,0),(function(){return r.apply(null,n)}))}function be(i){var o=et(arguments,1);return function(){for(var t=0,e=o.slice(),n=0,r=e.length;n<r;n++)e[n]===p&&(e[n]=arguments[t++]);for(;t<arguments.length;)e.push(arguments[t++]);return i.apply(this,e)}}function _e(t,e){var n;return function(){return 0<--t?n=e.apply(this,arguments):e=null,n}}function xe(t,e){return be(_e,(Y(e)||1)+1)(t)}function Ee(t){return xe(t)}function Se(t,e){if(t===e||a.call(t)!==a.call(e)||k(t)&&k(e))return t===e;if(t.toString()===e.toString())if(T(t)){if(t.length===e.length){for(var n=t.length;n--;)if(!Se(t[n],e[n]))return!1;return!0}}else{var r=nt(t),i=nt(e),o=r.length;if(r.length===i.length){for(;o--;)if(!Se(t[r[o]],e[r[o]]))return!1;return!0}}return!1}var Oe=/[\t\r\n\f\x20]/g,ke=/([^&=]+)=?([^&]*)/g;function we(t){var e={};return it(t,(function(t){e[t.name]=t.value})),e}function Te(t){return decodeURIComponent(t.replace(/\+/g," "))}function Ne(t){return encodeURIComponent(t).replace(" ","%20")}function Me(t){for(var e,n=W(t).split("#").shift(),r=n.indexOf("?"),i={},o=~r?n.substr(r+1):n;e=ke.exec(o);)i[Te(e[1])]=Te(e[2]);return delete i[o],i}function Pe(t){var e,n=ut(t);for(e in n)n[e]=Ne(x(n[e])?JSON.stringify(n[e]):n[e]);return JSON.stringify(n).replace(/["{}]/g,"").replace(/:/g,"=").replace(/,/g,"&").replace(Oe,"")}var Ae={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"$quot;","'":"&#x27;","`":"&#x60"},De={"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"',"&#x27;":"'","&#x60;":"`"},Re=/\\|'|\r|\n|\u2028|\u2029/g,je={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Ie=/[&<">'](?:(amp|lt|quot|gt|#39);)?/g,Ce=/&((g|l|quo)t|amp|#39);/g,Le=/<script\b[^>]*>(.*?)<\/script>/gi,qe=/<!--([\s\S]*?)-->/gi,ze=/[\t\r\n\f]/gim,Ue=/[A-Z]/g,Fe="[\\s\\x20\\xA0\\uFEFF]+",He=new RegExp(Fe,"g"),Je=new RegExp("^"+Fe,"g"),$e=new RegExp(Fe+"$","g"),Ge=new RegExp(">"+Fe+"<","g"),Xe=new RegExp("<"+Fe,"g"),We=new RegExp(Fe+">","g"),Ye=new RegExp("</"+Fe,"g");function Ve(t){return i.call(t)}function Ke(t){return t.replace(Je,"")}function Be(t){return t.replace($e,"")}function Qe(t){var e=~t.search("-")?"-":~t.search("_")?"_":"";if(e){var n=1;for(e=t.split(e);n<e.length;n++)e[n]=Ze(e[n]);return e.join("")}return t}function Ze(t){return t.charAt(0).toUpperCase()+t.substr(1)}function tn(t){return Ve(t).replace(ze,"").replace(He," ").replace(Ge,"><").replace(Xe,"<").replace(We,">").replace(Ye,"</")}function en(t,e,n){var r=n?"toUpperCase":"toLowerCase",i=W(e)||"-";return t.replace(Ue,(function(t,e){return(0<e?i:"")+t[r]()}))}function nn(t){return Ae[t]||t}function rn(t){return De[t]||t}function on(t){return"\\"+je[t]}function an(t){return+t===t?t:W(t).replace(Ie,nn)}function un(t){return+t===t?t:W(t).replace(Ce,rn)}function cn(t){return t.replace(Le,"").replace(qe,"")}function sn(t){return tn(t.replace(qe,""))}var fn={escape:"{{-([\\s\\S]+?)}}",interpolate:"{{#([\\s\\S]+?)}}",command:"{{\\*([\\s\\S]+?)}}",evaluate:"{{([\\s\\S]+?)}}"},ln=/^([\S]+)\s?([\s\S]+)?/,pn=/[\[\]]*/g;function hn(t){var e=t,n=(e||"").trim(),r=n.slice(0,3),i=n.slice(0,5),o=n.slice(0,7),a=n[n.length-1];return"/if"!==n&&"/for"!==n&&"/"!==n||(e="}"),"}"!==a&&"{"!==a&&("if "===r||"if("===r?e="if("+n.slice(2)+"){":"elseif"===o||"elseif("===o?e="}else if("+n.slice(6)+"){":"elif "===i||"elif("===i?e="}else if("+n.slice(4)+"){":"else"===i&&(e="}else{")),e}function dn(t){var e="",n=ln.exec(Ve(t)),r=n[1],i=n[2];if(r)switch(r.toLowerCase()){case"/":case"end":case"/for":case"/each":case"/if":case"/exist":e="';}); _p+='";break;case"if":case"exist":e="'; var "+(i=i.split(" then "))[0]+" = "+i[0]+" || false; _ext("+i[0]+","+(i[1]?i[1].toString()+",":"")+"function(){ _p+='";break;case"for":case"each":e=vn("op",(i=i.split(" in "))[1],i[0]);break;case"not":case"cat":case"extend":e=mn(r,(i=i.split(" with "))[1],i[0]);break;default:e=mn(r,(i=i.split(" use "))[0],i[1]||"",!0)}return e}function vn(t,e,n){return"'; struct."+t+"()("+e+",function("+n.replace(pn,"")+"){ _p+='"}function mn(t,e,n,r){var i=t.split(":");return"'; "+(r?e+"=":"")+"struct."+i[0]+'("'+(i[1]||"")+'")('+e+","+n.replace(pn,"")+"); _p+='"}var gn={line:/[\r\n\f]/gim,quot:/\s*;;\s*/gim,space:/[\x20\xA0\uFEFF]+/gim,assert:/_p\+='(\\n)*'[^+]/gim,comment:/<!--(.*?)-->/gim,tagleft:/\s{2,}</gim,tagright:/>\s{2,}/gim};function yn(a,t,e){var n,r,u=0,c="_p+='",i,o=x(t)?e:E(t)?t:"",s=x(t)?t:{},f=et(arguments,2),l=new RegExp(this.escape+"|"+this.interpolate+"|"+this.command+"|"+this.evaluate+"|$","g");Ve(a).replace(l,(function(t,e,n,r,i,o){return c+=a.slice(u,o).replace(Re,on),u=o+t.length,e?c+="'+((_t=("+e+"))==null?'':_(_t))+'":n?c+="'+((_t=("+n+"))==null?'':_t)+'":r?c+=dn(r,c):i&&(c+="';"+hn(i)+";_p+='"),t})),c=c.replace(gn.line,"").replace(gn.comment,"").replace(gn.assert,"").replace(gn.quot,";").replace(gn.space," ").replace(gn.tagright,"> ").replace(gn.tagleft," <"),c="with(__("+(o?"{}":"__({},_x_||{})")+",_bounds)){ "+c+"'; }",c="var _t,_d,_ext=struct.exist(),_=struct.html('encode'),__=struct.extend(),_p=''; "+c+" return _p;";try{r=h("(function(_bounds,struct,"+(o||"_x_")+(f.length?","+f.toString():"")+"){ "+c+" })")}catch(t){throw console.error(t.res=c),t}return i=[s,p],n=function(){return Ve(r.apply(this,i.concat(et(arguments))))},n}var bn=yn.bind(fn);function _n(){return $n(bn.apply(this,arguments))}function xn(t){var r={};return it(t?t.split(";"):[],(function(t){var e=(t||"").search("=");if(~e){var n=Ve(t.substr(0,e));n.length&&(r[n]=Ve(t.substr(e+1)))}})),r}function En(t){var e=et(arguments),n=e.length,r=xn(document.cookie);if(n){if(1===n)return r[t];var i=new Date;return i.setDate(i.getDate()+365),document.cookie=Ve(e[0]+"="+(e[1]||"")+";expires="+(e[2]||i.toUTCString())+";path="+(e[3]||"/")+";domain="+(e[4]||"")+";"+(e[5]?"secure":"")),!0}return r}var Sn={"application/x-www-form-urlencoded":0,"application/json":1};function On(t,e,n){if(t)switch(e){case 0:return Pe(n||{});case 1:return JSON.stringify(n||{});default:return Pe(n||{})}return n}function kn(t){var i=v({url:"",type:"GET",param:u,charset:"utf-8",vaild:!0,cache:!1,success:G,error:G,loading:G,loadend:G,header:u,username:null,password:null,timeout:0,aysnc:!0,emulateJSON:!0,contentType:!0},t||{}),o=c.localStorage;if(_(i.param)&&(i.param=i.param()),i.cache){o.getItem("_")||o.setItem("_","{}");var e=JSON.parse(o.getItem("_"))[i.url||c.location.href.split("#").shift()];if(void 0!==e)return i.sucess.call(c,e)}var n,a=new XMLHttpRequest;return"GET"===i.type.toUpperCase()&&i.param&&(i.url+=(~i.url.search(/\?/g)?"&":nt(i.param).length?"?":"")+Pe(i.param),i.param=null),a.addEventListener("loadstart",i.loading),a.addEventListener("loadend",i.loadend),a.open(i.type,i.url,i.aysnc,i.username,i.password),n=x(i.header)&&i.header["Content-Type"]||"application/x-www-form-urlencoded",i.header!==u&&x(i.header)&&ot(i.header,(function(t,e){a.setRequestHeader(e,t)})),"POST"===i.type.toUpperCase()&&!0===i.contentType&&-1===(n||"").search("json")&&a.setRequestHeader("Content-Type",n+";chartset="+i.charset),a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.onreadystatechange=function(t){if(4===a.readyState&&a.responseText){var e=a.status;if(200<=e&&e<300||304===e){var n;try{n=i.emulateJSON?JSON.parse(a.responseText):a.responseText}catch(t){return i.error.call(c,a,t,"json parser error")}if(i.success.call(c,n,a,t),i.cache){var r=JSON.parse(o.getItem("_"));r[i.url||c.location.href.split("#")[0]]=a.responseText,o.setItem("_",JSON.stringify(r))}}else i.error.call(c,a,t)}},Y(i.timeout)&&(a.timeout=1e3*Y(i.timeout),a.ontimeout=function(){4===a.readyState&&a.responseText||i.error.call(c,a),a.abort()}),a.send(i.param?x(i.param)?On(i.contentType,Sn[n],i.param):i.param:null),a}function wn(t){var e=v({url:"",key:"callback",param:u,timeout:5,error:G,success:G,callback:("structJSTP"+Math.random()).replace(".","")},t||{});_(e.param)&&(e.param=e.param());var n=e.url+"?"+Pe(e.param)+(nt(e.param).length?"&":"")+e.key+"="+e.callback,r=document.createElement("script");r.src=n,c[e.callback]=function(t){document.body.removeChild(r,hr(e.timesetup)),c[e.callback]=null,e.success(t)},document.body.append(r),Y(e.timeout)&&(e.timesetup=pr((function(){document.body.removeChild(r),c[e.callback]=null,e.error()}),1e3*e.timeout))}function Tn(t,e,n,r){return _(e)&&(r=n,n=e,e=u),kn({url:t,param:e,success:n,error:r})}function Nn(t,e,n,r){return _(e)&&(r=n,n=e,e=u),kn({url:t,type:"POST",param:e,success:n,error:r})}var Mn={},Pn=0;function An(t,e,n){var r=t._eid||0;return 0===r&&g(t,"_eid",{value:r=++Pn,writable:!1,enumerable:!1,configurable:!0}),Mn[r]||(Mn[r]={}),Mn[r][e]||(Mn[r][e]=[]),ht(Mn[r][e],n)||Mn[r][e].push(n),t}function Dn(t,e,n){var r=t._eid||0;return r&&Mn[r]&&(Mn[r][e]?mt(Mn[r][e],n).length&&n||delete Mn[r][e]:e||n||(delete t._eid,delete Mn[r])),t}function Rn(t,e,n){var r=!1,i=t._eid||0;return i&&Mn[i]&&(r=_(n)&&Mn[i][e]?ht(Mn[i][e],n):Fn(Mn[i][e])),!!r}function jn(t,e){var n=(x(e)?e._eid:0)||0;return n&&(g(t,"_eid",{value:++Pn,writable:!1,enumerable:!1,configurable:!0}),Mn[t._eid]=st(Mn[n])),t}function In(t,e,n){var r=t._eid||0;n=n||[],r&&Mn[r]&&""!==e&&ot(Mn[r][e],(function(t){t.apply(this,n)}),t)}function Cn(t,e,n){return it(W(e).split(","),(function(t){In(this,Ve(t),n)}),t),t}function Ln(t,e,n){var r,i,o=W(e||"").split(".");if(1===o.length)t.hasOwnProperty(e)&&(r=t[e]);else for(i=0,r=t;i<o.length&&!k(r=r[o[i]]);i++);if(n){var a=et(arguments,3);_(n)?r=n.apply(r,(a.unshift(r),a)):E(n)&&(r=_(r[n])?r[n].apply(r,a):r[n])}return r}function qn(t,e,n){var r,i,o,a,u=(e||"").split(".");if(1===u.length)t[e]=n;else{for(o=0,r=t,i=u.pop();o<u.length;o++)r=null==(a=r[u[o]])?{}:a;r[i]=n}return t}function zn(t,e){var n,r,i,o=(e||"").split(".");if(1===o.length)t.hasOwnProperty(e)&&delete t[e];else{for(r=0,n=t,i=o.pop();r<o.length;r++)n=n[o[r]];T(n)?n.splice(Y(i),1):delete n[i]}return t}function Un(t,e){return 1<Y(e)?et($t(t),0,Y(e)):t[fe(Fn(t)-1)]}function Fn(t){return _(t)||null==t||R(t)?0:O(t.length)?t.length:x(t)?nt(t).length:0}function Hn(){return(new Date).getTime()}function Jn(t,e){var n=[],r=E(e);return A(t,"String")?t.split(""):(at(t,(function(t){n.push(r?Ln(t,e):t)})),n)}function $n(n,r){var i,o=[];return function(){var t,e=et(arguments);for(i=o.length;i--;)if(Se(o[i][0],e))return o[i][1];return o.push([e,t=n.apply(r||this,e)]),t}}function Gn(t,e){var n=w(t)?y(ft,t):t;return _(n)?function(){return!n.apply(e,arguments)}:y(At,n).bind(e)}function Xn(){var e=et(arguments);return function(t){return lt(e,(function(t,e){return e(t)}),t)}}function Wn(t,e){if(x(t)&&E(e)&&e){var n=Ln(t,e);return n.sort.apply(n,et(arguments,2)),t}return T(t)?t.sort.apply(t,et(arguments,1)):t}function Yn(t){for(var e,n,r=0,i=t.length;r<i;r++){for(e=t[r],n=r-1;0<=n&&t[n]>e;)t[n+1]=t[n],n--;t[n+1]=e}return t}function Vn(t,e){return x(t)&&E(e)&&e?(Yn(Ln(t,e)),t):T(t)?Yn(t):t}function Kn(t,e,n){for(var r=t[n],i=e,o=e;i<n;i++)t[i]<r&&Z(t,i,o,o++);return Z(t,n,o),o}function Bn(t,e,n){if(!(n<e)){var r=Kn(t,e,n);Bn(t,e,r-1),Bn(t,r+1,n)}}function Qn(t){return Bn(t,0,t.length-1),t}function Zn(t,e){return x(t)&&!T(t)&&E(e)?(Qn(Ln(t,e)),t):T(t)?Qn(t):t}function tr(t){var e=et(arguments,1);t&&wt(e).apply(this,e)}function er(){return it(tt.apply(null,arguments),Object.freeze).pop()}function nr(t,e,n){var r;return function(){r||pr((t.apply((r=1,n),arguments),function(){r=0}),e)}}function rr(){return new ir(arguments)}function ir(t){g(this,{"-":{value:0 in t?t:void 0,writable:!0,enumerable:!1,configurable:!1},"=":{value:[],writable:!1,enumerable:!1,configurable:!1}})}function or(t,e){var n,r=[];for(n=0;n<t;n++)r[n]=e;return r}function ar(t,n){var r={};return T(t)&&T(n)&&it(t,(function(t,e){r[t]=n[e]})),r}ir.prototype.value=function(){return Xn.apply(null,this["="].splice(0,Fn(this["="]))).apply(null,void 0===this["-"]?arguments:this["-"])};var ur="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",cr=c.btoa||function(t){for(var e,n,r=W(t),i="",o=0,a=ur;r.charAt(0|o)||(a="=",o%1);i+=a.charAt(63&e>>8-o%1*8)){if(255<(n=r.charCodeAt(o+=.75)))throw new Error("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");e=e<<8|n}return i},sr=c.atob||function(t){var e=W(t).replace(/[=]+$/,""),n="";if(e.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,i,o=0,a=0,u=ur;i=e.charAt(a++);~i&&(r=o%4?64*r+i:i,o++%4)?n+=String.fromCharCode(255&r>>(-2*o&6)):0)i=u.indexOf(i);return n};function fr(t){return cr(unescape(encodeURIComponent(W(t))))}function lr(t){return decodeURIComponent(escape(sr(W(t).replace(/\s/g,""))))}function pr(t,e){return setTimeout(t,Y(e))}function hr(t){clearTimeout(t)}var dr={obj:x,object:x,arr:T,array:T,arraylike:D,str:E,string:E,bool:S,boolean:S,num:O,number:O,fn:_,func:_,nan:R,prim:k,primitive:k,idt:M,identifier:M,def:A,define:A,int:j,float:I,double:I,date:C,ept:L,empty:L,dom:q,elm:z,element:z,node:U,text:U,native:F,need:P,require:P,required:P,type:J,default:J},vr={str:W,string:W,num:Y,number:Y,arr:B,array:B,hex:K,rgb:V,minus:Q,default:W},mr={arr:it,array:it,obj:ot,object:ot,each:at,default:at},gr={key:dt,index:dt,exist:ht,default:ht},yr={first:St,last:Et,single:Ot,one:Ot,index:xt,default:xt},br={key:Nt,hook:It,map:Tt,default:Tt},_r={fast:Rt,slim:jt,default:jt},xr={un:Ut,unpair:Ut,pair:zt,default:zt},Er={at:Ht,with:Jt,all:Ft,default:Ft},Sr={left:ne,right:re,lefto:ie,leftto:ie,righto:ie.bind(!0),rightto:ie.bind(!0),default:ne},Or={int:fe,float:le,double:le,str:ve,word:ve,string:ve,bool:pe,boolean:pe,char:he,letter:he,character:he,arr:ye,array:ye,date:me,hex:de,dice:ge,default:Math.random},kr={parse:Me,str:Pe,stringify:Pe,serialize:Pe,query:we,requery:we,default:Me},wr={encode:an,decode:un,strip:cn,zip:sn,default:Xn(cn,sn)},Tr={trim:Ve,trimleft:Ke,trimright:Be,came:Qe,camelize:Qe,capit:Ze,capitalize:Ze,collapse:tn,rize:en,rizewith:en,default:W},Nr={get:Tn,fetch:Tn,put:Nn,post:Nn,jsonp:wn,cors:wn,ajax:kn,default:kn},Mr={on:An,add:An,bind:An,off:Dn,remove:Dn,unbind:Dn,has:Rn,exist:Rn,copy:jn,extend:jn,emit:Cn,trigger:Cn,dispatch:Cn,default:Cn},Pr={get:Ln,set:qn,rm:zn,not:zn,remove:zn,default:Ln},Ar={a2b:sr,atob:sr,btoa:cr,b2a:cr,utob:fr,u2b:fr,btou:lr,b2u:lr,default:sr},Dr={left:lt,right:pt,default:lt},Rr={native:Wn,q:Zn,i:Vn,quick:Zn,insert:Vn,default:Wn},jr={fast:Vt,slim:Kt,default:Vt},Ir={fast:Qt,slim:Zt,default:Qt},Cr={axt:_n,cache:_n,default:bn},Lr={chain:rr,define:g,extend:v,depextend:m,keys:nt,noop:G,clone:ut,cloneDeep:st,depclone:st,not:mt,cat:Mt,slice:et,find:gt,filter:gt,reject:yt,every:bt,some:_t,chunk:Gt,compact:Xt,pluck:Ct,groupBy:Lt,countBy:qt,concat:Wt,cast:tt,shuffle:$t,first:kt,last:wt,flat:oe,merge:ee,auto:Un,part:xe,once:Ee,eq:Se,cookie:En,values:Jn,memoize:$n,negate:Gn,link:Xn,size:Fn,now:Hn,exist:tr,lock:er,cool:X,hz:nr,fill:or,combined:ar,ayc:pr,cyc:hr,v8:$},qr={op:mr,each:mr,map:br,has:gr,diff:jr,intsec:Ir,type:dr,sort:Rr,html:wr,unique:_r,convert:vr,pull:Er,param:kr,ajax:Nr,event:Mr,prop:Pr,drop:Sr,pairs:xr,index:yr,random:Or,string:Tr,reduce:Dr,assembly:Ar,doom:Cr};ot(Lr,(function(t,e){ir.prototype[e]=function(){return this["="].push(t),this},l(t,e)})),ot(qr,(function(e,t){ir.prototype[t]=function(t){return this["="].push(e[Ve(W(t).toLowerCase())]),this},d(er(e),t)})),p.root=c,p.broken=u,p.toString=W,p.prototype=p.__proto__=null;var zr=er($(p)),Ur=window.localStorage,Fr="HN@",Hr=function(t){return t.split("").reverse().join("")},Jr={t:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",ram:{},kAt:function(t,e){return t.charCodeAt(~~(e%t.length))},ecd:function(t){var e,n,r,i,o,a,u=0,c="";if(!t)return t;for(;e=(o=t[u++]<<16|t[u++]<<8|t[u++])>>18&63,n=o>>12&63,r=o>>6&63,i=63&o,c+=this.t.charAt(e)+this.t.charAt(n)+this.t.charAt(r)+this.t.charAt(i),u<t.length;);return((a=t.length%3)?c.slice(0,a-3):c)+"===".slice(a||3)},dcd:function(t){var e,n,r,i,o,a,u=0,c=[];if(!t)return t;for(t+="";e=(a=this.t.indexOf(t.charAt(u++))<<18|this.t.indexOf(t.charAt(u++))<<12|(i=this.t.indexOf(t.charAt(u++)))<<6|(o=this.t.indexOf(t.charAt(u++))))>>16&255,n=a>>8&255,r=255&a,c.push(e),64!==i&&(c.push(n),64!==o&&c.push(r)),u<t.length;);return c},incry:function(t,e){for(var n=0,r=t.length,i=[];n<r;n++)i[n]=t[n].charCodeAt(0)^this.kAt(e,n);return this.ecd(i)},decyt:function(t,e){for(var n=0,r=(t=this.dcd(t)).length;n<r;n++)t[n]=String.fromCharCode(t[n]^this.kAt(e,n));return t.join("")},set:function(t,e){Ur.setItem(Fr+this.incry(t,Hr(t)),this.incry(encodeURIComponent(JSON.stringify(e)),t))},get:function(t){var e=Ur.getItem(Fr+this.incry(t,Hr(t)));return e?JSON.parse(decodeURIComponent(this.decyt(e,t))):0},rm:function(t){Ur.removeItem(Fr+this.incry(t,Hr(t)))}};function $r(t,e){return this.on(e,t)}var Gr=zr.each("object"),Xr=zr.define();function Wr(n,t){return Gr(t,(function(t,e){Xr(n,e,{value:t,writable:!1,enumerable:!1,configurable:!1})})),n}var Yr=zr.broken,Vr=zr.keys(),Kr=zr.prop("get"),Br=zr.size(),Qr=zr.clone();function Zr(t,e){if(!e._v)return!0;for(var n,r,i=e._asv(Yr),o=[],a=Vr(i),u=0,c=a.length;u<c;u++)if(!(0,i[a[u]])(n=Kr(t,a[u]))){o.push(a[u],n),console.error("model of key ( ".concat(a[u]," ) except error with model verify, please check your model verify define!"));break}return r=!Br(o),e.emit("verify:"+(r?"success":"fail"),r?[Qr(t)]:o),r}var ti=zr.prop("set");function ei(t,e,n){return!n._v||Zr(ti(n.get(),t,e),n)}var ni=zr.ajax();function ri(t,e,n,r,i,o){var a=this,u=arguments;if(this.isLock)return this;var c={url:e||this.url||"",type:s.EMULATEHTTP[t],async:!0,param:n||this.pipeParam||{},header:o||this.pipeHeader||{}};return"POST"===c.type&&this.emulateJSON&&(c.header["Content-Type"]="application/json"),c.header["X-HTTP-Method-Override"]=t,c.success=function(){r.apply(a,u),a.emit(t+":success",u)},c.error=function(){i.apply(a,u),a.emit(t+":error",u)},this.emit(t,[ni(c),c])}var ii=zr.type("function"),oi=zr.event("on"),ai=zr.event("off"),ui=zr.event("emit");function ci(t,e){return ii(e)&&oi(this,t,e),this}function si(t,e){return ai(this,t,e)}function fi(t,e){return ui(this,t,e||[])}var li=zr.broken,pi=zr.extend(),hi=zr.clone(),di=zr.type("string"),vi=zr.type("bool"),mi=zr.type("object"),gi=zr.type("array"),yi=zr.type("prim"),bi=zr.type("function"),_i=zr.each("object"),xi=zr.cool(),Ei=zr.size(),Si=zr.prop("get"),Oi=zr.prop("set"),ki=zr.prop("rm"),wi=zr.merge(),Ti=zr.noop(),Ni=zr.link(),Mi=zr.eq(),Pi=0,Ai=function(){var n=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=pi(hi(s.DEFAULT_OPTION),t);if(!mi(e.data)||gi(e.data))throw new Error(f.MODEL_UNEXPECT);var r=e.events,i=e.verify,o=di(e.name),a=vi(e.store)&&e.store&&o,u=(this.isLock=!!e.lock,[]),c=e.data||{};a&&Jr.get(e.name);_i(r,$r,Wr(this,{name:o?e.name:void 0,_ast:function(t,e){var n=bi(t)?t:xi;return e===li?n(c):{}},_mid:Pi++,_asl:function(t){return t===li?n.isLock:null},_asv:function(t){return t===li?i:{}},_ash:function(t){return t===li?u:[]},_v:!!Ei(i),_l:function(t,e){return e===li?n.isLock=!!t:void 0},_c:function(t,e){return e===li?c=t:{}},_s:a})),o&&(Jr.ram[this.name]=this),pi(this,e,s.IGNORE_KEYWORDS).emit("init").off("init")};Ai.prototype={constructor:Ai,on:ci,off:si,emit:fi,lock:function(){return this._l(!0,li),this.emit("lock")},unlock:function(){return this._l(!1,li),this.emit("unlock")},get:function(t,e){var n=this._ast(xi,li);return hi(t||0===t?Si(n,t,e):n)},set:function(t,e,n){if(this.isLock)return this;var r,i=this._ast(xi,li),o=this._ash(li),a=arguments.length,u=!yi(t)&&mi(t);if(a)if(u)n=e,(r=t)&&!Mi(i,r)&&Zr(r,this)&&(o.push(hi(i)),this._c(r,li,this.change=!0),this._s&&Jr.set(this.name,r),n||this.emit("change",[hi(r)]));else if(!Mi(Si(i,t),e)&&ei(t,e,this)&&(o.push(hi(i)),Oi(i,t,e,this.change=!0),this._s&&Jr.set(this.name,i),!n)){this.emit("change",[hi(i)]);var c=t.split("."),s=c[0],f={};f[s]=hi(i[s]),1<c.length&&this.emit("change:"+s,[f]),this.emit("change:"+t,[f])}return this},remove:function(t,e){if(this.isLock)return this;var n=this._ast(xi,li),r=this._ash(li);if(yi(t)&&null!=t&&(r.push(hi(n)),ki(n,t),this._s&&Jr.set(this.name,n),!e)){this.emit("change",[hi(n)]);var i=t.split("."),o=i[0],a={};a[o]=hi(n[o]),1<i.length&&this.emit("change:"+o,[a]),this.emit("change:"+t,[a]),this.emit("remove:"+t)}return this},clear:function(t){var e={};return this.set(e,t),this._ast(xi,li)!==e||t||this.emit("clear"),this},back:function(t){if(void 0===this._asl(li))return this;var e,n=this._ash(li);return n.length&&(e=n.pop())&&(this._c(e,li,this.change=!0),t||this.emit("change,back",[e])),this},pipe:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(mi(t)){var e=wi({type:"get",async:!0,success:Ti,error:Ti},t);return ri.call(this,e.type,e.url,e.param,e.success,e.error,e.header)}return this},send:function(t,e){return mi(t)&&(e=t,t=null),this.pipe({type:"send",url:t||this.url,param:this.get(),header:e})},fetch:function(t,e,n){return bi(t)&&(n=e,e=t,t={}),this.pipe({type:"fetch",url:this.url,param:this.get(),success:Ni(bi(e)?e:JSON.parse,this.set.bind(this)),header:n})},sync:function(t,e){return mi(t)&&(e=t,t=null),this.pipe({type:"sync",url:t||this.url,param:this.get(),header:e})},toJSON:function(){return JSON.stringify(this.get())}};var Di={DEFAULT_OPTION:{},IGNORE_KEYWORDS:["root","render","model","connect","events"]},Ri=zr.root,ji=zr.each(),Ii=zr.extend(),Ci=zr.each("array"),Li=zr.type("function"),qi=zr.type("string"),zi=zr.type("arraylike"),Ui=zr.type("elm"),Fi=zr.slice(),Hi=zr.has(),Ji={MouseEvent:["click","dbclick","mouseup","mousedown","mouseout","mouseover","mouseenter","mouseleave"]},$i=Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector,Gi=function(t){this.el=zi(t)?Fi(t):Ui(t)?[t]:[]},Xi=function t(e){return t.init(e)},Wi=1,Yi={},Vi="onfocusin"in Ri,Ki={focus:"focusin",blur:"focusout"},Bi={mouseenter:"mouseover",mouseleave:"mouseout"},Qi={check:"change"},Zi={change:"input",input:"input"},to=["input","keypress","keydown","keyup"],eo=-1<Ri.navigator.userAgent.indexOf("Firefox"),no=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,ro={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function io(t){return t._zid||(t._zid=Wi++)}function oo(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function ao(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function uo(t,e,n,r){var i=new RegExp;return(e=oo(e)).ns&&(i=ao(e.ns)),(Yi[io(t)]||[]).filter((function(t){return t&&(!e.e||t.e==e.e)&&(!e.ns||i.test(t.ns))&&(!n||io(t.fn)===io(n))&&(!r||t.sel==r)}))}function co(t,e){return t.del&&!Vi&&t.e in Ki||!!e}function so(t){var e=0;if(null!=t.selectionStart)e=t.selectionStart;else if(document.selection){t.focus();var n=document.selection.createRange();n.moveStart("character",-t.value.length),e=n.text.length}return e}function fo(t,e){if(t.createTextRange){var n=t.createTextRange();return n.move("character",e),n.select()}return t.selectionStart?t.setSelectionRange(e,e,t.focus()):t.focus()}function lo(t){return Bi[t]||Zi[t]||Qi[t]||Vi&&Ki[t]||t}function po(s,t,r,f,i,o,a){var e=io(s),u=Yi[e]||(Yi[e]=[]);ji(t.split(/\s/),(function(t){var n=oo(t);n.fn=r,n.sel=i,n.e in Bi&&(r=function(t){var e=t.relatedTarget;if(!e||e!==this&&!this.contains(e))return n.fn.apply(this,arguments)});var c=(n.del=o)||r;n.proxy=function(t){var e,n=t.type,r=t.target.nodeName,i="true"===t.target.contentEditable,o=Hi(to,n)&&("INPUT"===r||"TEXTAREA"===r||i),a=new Xi.xEvent(t=go(t));if(t.isImmediatePropagationStopped()||o&&t.target._compositionIn)return!1;a.data=f,o&&(e=so(t.target));var u=c.apply(s,void 0===a._args?[a]:[a].concat(a._args));return!1===u&&(t.preventDefault(),t.stopPropagation()),e&&fo(t.target,e),u},n.i=u.length,u.push(n);var e=lo(n.e);e in Zi&&(s.addEventListener("compositionstart",(function(t){t.target._compositionIn=!0})),s.addEventListener("compositionend",(function(t){t.target._compositionIn=!1,eo||Xi(t.target).trigger("input")}))),s.addEventListener(e,n.proxy,co(n,a))}))}function ho(e,t,n,r,i){var o=io(e);Ci((t||"").split(/\s/),(function(t){ji(uo(e,t,n,r),(function(t){delete Yi[o][t.i],e.removeEventListener(lo(t.e),t.proxy,co(t,i))}))}))}function vo(){return!0}function mo(){return!1}function go(r,i){if(i||!r.isDefaultPrevented){i||(i=r),ji(ro,(function(t,e){var n=i[e];r[e]=function(){return this[t]=vo,n&&n.apply(i,arguments)},r[t]=mo}));try{r.timeStamp||(r.timeStamp=Date.now())}catch(t){}(void 0!==i.defaultPrevented?i.defaultPrevented:"returnValue"in i?!1===i.returnValue:i.getPreventDefault&&i.getPreventDefault())&&(r.isDefaultPrevented=vo)}return r}function yo(t){var e,n={originalEvent:t};for(e in t)no.test(e)||void 0===t[e]||(n[e]=t[e]);return go(n,t)}Xi.init=function(t){return new Gi(t)},Xi.matchz=function(t,e){return null!==t&&t!==document&&qi(e)&&$i.call(t,e)},Xi.event={add:po,remove:ho},Xi.proxy=function(t,e){var n=2 in arguments&&Fi(arguments,2);if(Li(t)){var r=function(){return t.apply(e,n?n.concat(Fi(arguments)):arguments)};return r._zid=io(t),r}if(qi(e))return n?Xi.proxy.apply(null,(n.unshift(t[e],t),n)):Xi.proxy(t[e],t);throw new TypeError("expected function")},Xi.Event=function(t,e){var n;qi(t)||(t=(e=t).type);var r=document.createEvent(Hi(Ji.MouseEvent,t)?"MouseEvent":"Events"),i=!0;if(e)for(n in e)"bubbles"===n?i=!!e[n]:r[n]=e[n];return r.initEvent(t,i,!0),go(r)},Xi.xEvent=function(t){var e;for(e in t)this[e]=t[e]},Gi.prototype={get:function(t){return 0 in arguments?this.el[+t+(t<0?this.length:0)]:this.el},each:function(t,e){return Ci(this.el,t,e||this),this},find:function(e){var n=[];return Ci(this.el,(function(t){n=Fi(t.querySelectorAll(e)).concat(n)})),Xi(n)},closest:function(t,e){for(var n,r=this.el,i=this.get(0),o=0,a=r.length;o<a;i=r[++o]){for(;i&&!n&&i!==e;)Xi.matchz(i=i.parentNode,t)&&(n=i);if(n)break}return Xi(n||[])},on:function(t,r,i,o,a){var e;return t&&!qi(t)?(ji(t,(function(t,e){this.on(e,r,i,t,a)}),this),this):(qi(r)||Li(o)||!1===o||(o=i,i=r,r=void 0),void 0!==o&&!1!==i||(o=i,i=void 0),Li(i)&&qi(r)&&(a=o,o=i),!1===o&&(o=mo),this.each((function(n){r&&(e=function(t){var e=Xi.matchz(t.target,r)?t.target:Xi(t.target).closest(r,n).get(0);e&&e!==n&&o.apply(a||e,[Ii(t,{currentTarget:e,liveFired:n})].concat(Fi(arguments,1)))}),po(n,t,o,i,r,e)})))},off:function(e,n,r){return e&&!qi(e)?(ji(e,(function(t,e){this.off(e,n,t)}),this),this):(qi(n)||Li(r)||!1===r||(r=n,n=void 0),!1===r&&(r=mo),this.each((function(t){ho(t,e,r,n)})))},trigger:function(e,n){return(e=qi(e)?Xi.Event(e):go(e))._args=n,this.each((function(t){e.type in Ki&&Li(t[e.type])?t[e.type]():"dispatchEvent"in t?t.dispatchEvent(e):Xi(t).triggerHandler(e,n)}))},triggerHandler:function(e,n){var r,i;return this.each((function(t){(r=yo(qi(e)?Xi.Event(e):e))._args=n,r.target=t,ji(uo(t,e.type||e),(function(t){return i=t.proxy(r),!r.isImmediatePropagationStopped()}))})),i},html:function(e){return this.each((function(t){t.innerHTML=_toStr(e)}))},remove:function(){return this.each((function(t){t.parentNode.removeChild(Xi(t).off().get(0))}))}};var bo=zr.prop("set"),_o=zr.type("string"),xo=zr.type("func"),Eo=zr.type("object"),So=zr.html("decode"),Oo=zr.convert("string"),ko=zr.each("array"),wo=zr.each("object"),To=zr.map(),No=zr.noop(),Mo=zr.eq(),Po={class:"className",style:"style.cssText",placeholder:"@placeholder",maxlength:"@maxlength",minLength:"@minLength",max:"@max",min:"@min",href:"@href",checked:"*checked",disabled:"*disabled",readonly:"*readonly",required:"*required",selected:"*selected",controls:"*controls",ended:"*ended",muted:"*muted",hidden:"*hidden",seeking:"*seeking",paused:"*paused",loop:"*loop",autoplay:"*autoplay",multiple:"*multiple",autofocus:"*autofocus",autocomplete:"*autocomplete",draggable:"*draggable",spellcheck:"*spellcheck",translate:"*translate",specified:"*specified",defer:"*defer",async:"*async"},Ao=["no","replace","append","remove","modifytext","withtext","removetext","addattr","modifyattr","removeattr"],Do=new RegExp("</([^><]+?)>|<([^><]+?)/>|<([^><]+?)>|([^><]+)|$","g"),Ro={input:1,br:1,hr:1,img:1,meta:1,area:1,base:1,col:1,isindex:1,command:1,embed:1,keygen:1,link:1,head:1,param:1,source:1,track:1,wbr:1,path:1,circle:1,ellipse:1,line:1,rect:1,use:1,stop:1,polyline:1,polygon:1},jo=/(\S+)=["'](.*?)["']|([\w-]+)/gi,Io=/^\{|\}$/gi,Co=/^\{([^'"\s]+)\}$/i,Lo=/^[\r\n\f\t\s]+|[\r\n\f\t\s]+$/gi,qo=/^default[^\s]+/i,zo=function t(e,n,r){var i=Po[n]||n,o=_o(r)?So(r):r;if(qo.test(i)){i=i.slice(7).toLowerCase();var a=e.getAttribute(i)||e[i];null!=a&&""!==a||t(e,i,o)}else"*"===i[0]?bo(e,i.slice(1),"true"===o||!0===o):"@"===i[0]?e.setAttribute(i.slice(1),o):":"===i[0]?Xi(e).on(i.slice(1),o):bo(e,i,o)},Uo=function(t,e,n){if(":"===e[0]&&xo(n))Xi(t).off(e.slice(1),n);else if(t[e]&&!delete t[e])try{t[e]=null}catch(t){}else t.removeAttribute(e)},Fo=function(t,e,n){var r,i=e;return Co.test(e)&&(i=void 0!==(r=n[e.replace(Io,"")])?r:e),":"===t[0]&&(i=xo(r)?r:Function("event",Oo(e))),i},Ho=function(n,t){var r={};return wo(t,(function(t,e){n[e]===t&&(r[e]=1)})),r},Jo=[No,function(t){var e=t.s;e&&e.parentNode&&e.parentNode.replaceChild(t.n,e)},function(t){var e=t.s;e&&e.appendChild(t.n)},function(t){var e=t.s;e.parentNode&&e.parentNode.removeChild(e)},function(t){var e=t.s;if(t.isSlot)return e._destory&&e._destory(),e.parentNode.replaceChild(t.n,e);e.textContent=So(t.c)},function(t){var e=t.s;if(t.isSlot)return e._destory&&e._destory(),e.parentNode.replaceChild(t.n,e);e.textContent=So(t.c)},function(t){t.s.innerHTML=t.n.innerHTML},function(n){wo(n.a,(function(t,e){zo(n.s,e,t)}))},function(t){var n=t.s,r=Ho(t.o,t.a);wo(t.o,(function(t,e){e in r||Uo(n,e,t)})),wo(t.a,(function(t,e){e in r||zo(n,e,t)}))},function(n){wo(n.a,(function(t,e){Uo(n.s,e,t)}))}],$o=function(t,e){var n=_o(t)?t:"";if(n&&e){var r={},i=n.trim().split("::");return r.name=i[0],r.path=i[1],r.root=e,r}},Go={treeDiff:function(t,e,n,r,i,o){if(void 0===t)n.unshift(this.createPatch(r,e,2,o));else if(void 0===e)n.push(this.createPatch(t,0,3,o));else if(t.tagName===e.tagName){if(e.isSlot||t.isSlot)return n.push(this.createPatch(t,e,5,o)),n;if(Mo(t.attributes,e.attributes)||(t.attributes&&e.attributes?n.push(this.createPatch(t,e,8,o)):t.attributes?e.attributes||n.push(this.createPatch(t,e,9,o)):n.push(this.createPatch(t,e,7,o))),t.text!==e.text)return t.text&&e.text&&t.text!==e.text?n.push(this.createPatch(t,e,4,o)):t.text?e.text||n.push(this.createPatch(t,e,6,o)):n.push(this.createPatch(t,e,5,o)),n;var a,u=t.child.length,c=e.child.length;if(u||c)if(u<c){for(a=u;a<c;a++)n.push(this.createPatch(t,e.child[a],2,o));for(a=u;a--;)this.treeDiff(t.child[a],e.child[a],n,t,e,o)}else if(c<u){for(a=u-1;c<=a;a--)n.push(this.createPatch(t.child[a],0,3,o));for(a=c;a--;)this.treeDiff(t.child[a],e.child[a],n,t,e,o)}else for(a=Math.max(u,c);a--;)this.treeDiff(t.child[a],e.child[a],n,t,e,o)}else t.tagName!==e.tagName&&n.push(this.createPatch(t,e,1,o));return n},applyPatch:function(e,t){ko(To(t,function(t){return t.path=t.s,t.s=this.mapTreeNode(e,t.s),t}.bind(this)),(function(t){Jo[t.t].call(e,t)}))},mapTreeNode:function(t,e){for(var n,r=0,i=t.children;r<e.length&&i[e[r]];r++)i=(n=i[e[r]]).children;return n},createSelector:function(t){for(var e=[t.i];t=t.parent;)void 0!==t.i&&e.unshift(t.i);return e},createPatch:function(t,e,n,r){var i,o=this.createSelector(t),a=e.isSlot;switch(Ao[n]){case"replace":i={t:1,s:o,n:this.createDOMElement(e,r)};break;case"append":i={t:2,s:o,n:this.createDOMElement(e,r)};break;case"remove":i={t:3,s:o};break;case"modifytext":i={t:4,s:o,c:e.text,isSlot:a},a&&(i.n=this.createDOMElement(e,r));break;case"withtext":i={t:5,s:o,c:e.text,isSlot:a},a&&(i.n=this.createDOMElement(e,r));break;case"removetext":i={t:6,s:o,n:this.createDOMElement(e,r)};break;case"addattr":i={t:7,s:o,a:e.attributes};break;case"modifyattr":i={t:8,s:o,a:e.attributes,o:t.attributes};break;case"removeattr":i={t:9,s:o,a:t.attributes};break;default:i={t:0}}return i},createTreeFromHTML:function(t,o){var a,e={tagName:"__AX_VIEWROOT__",isRoot:!0,child:[]},u=e,c=e.child;return t.replace(Do,function(t,e,n,r,i){return t&&t.replace(Lo,"")&&(e?(u=u.parent,c=u.child):n?((a=this.createObjElement(n,o)).i=c.length,c.push(a),a.parent=u):r?((a=this.createObjElement(r,o)).i=c.length,c.push(a),a.parent=u,a.tagName in Ro||(c=(u=a).child)):i&&i.trim()&&(u.text=i)),t}.bind(this)),e},createObjElement:function(t,e){var n=t.split(" "),r=Eo(e)?e:{},i=n.shift(),o=n.join(" "),a={tagName:i,child:[]};if("slot"===i&&(a.isSlot=!0),o){for(var u,c,s={};u=jo.exec(o);)u[1]?s[u[1]]=Fo(u[1],u[2],r):c=c?(s[c]=Fo(c,u[0],r),0):u[0];a.attributes=s}return a},createDOMElement:function(t,e){var n=document.createElement(t.tagName);if(e&&t.attributes&&t.attributes.ref&&(e.refs[t.attributes.ref]=n),wo(t.attributes,(function(t,e){zo(n,e,t)})),e&&t.isSlot){var r=$o(t.text,n);return r&&e._updateSlotQueue.push(r),n}return t.text&&(n.textContent=So(t.text)),t.child.length&&ko(t.child,(function(t){n.appendChild(this.createDOMElement(t,e))}),this),n}},Xo=0,Wo=zr.doom(),Yo=zr.doom("cache"),Vo=zr.lock(),Ko=zr.extend(),Bo=zr.each("array"),Qo=zr.each("object"),Zo=zr.slice(),ta=zr.type("func"),ea=zr.type("string"),na=zr.type("number"),ra=zr.type("array"),ia=zr.type("object"),oa=zr.type("elm"),aa=zr.type("arraylike"),ua=zr.prop("get"),ca=zr.size(),sa=zr.ayc(),fa=zr.noop(),la=zr.link(),pa=zr.clone(),ha=zr.define(),da=zr.convert("string"),va=zr.event("on"),ma=zr.event("off"),ga=zr.event("emit");function ya(t,e){return this.on(e,t)}function ba(t){if(!oa(t)&&!aa(t))throw new TypeError("el must be typeof DOMElement or NodeList collections -> not "+t);return!0}function _a(t){return function(){return t.emit("beforeRender",arguments),arguments}}function xa(e,n){return function(t){return n.apply(e,t),t}}function Ea(e){return function(t){return e.root._vid=e._vid,e.emit("completeRender",t)}}function Sa(t,e){var n=_a(t),r=xa(t,e),i=Ea(t);return la(n,r,i)}function Oa(e,t){if(ta(t)){var n=Sa(e,t.bind(e));ha(e,"render",{get:function(){return n},set:function(t){return ta(t)&&(n=Sa(e,t.bind(e)),ca(e._bounderModels)&&Qo(e._bounderModels,(function(t){t.off("change",e.render),t.on("change",n)}))),n},enumerable:!1,configurable:!1})}return e}function ka(t,e){t&&t._updateSlotQueue.length&&(Bo(t._updateSlotQueue,wa.bind(t,e)),t._updateSlotQueue=[])}function wa(t,e){var n=ua(this,e.name);if(n){var r=fa,i=t[0],o=e.path&&ia(i)?[ua(i,e.path)]:t;return r=n.constructor===Na?function(){var t=n({root:e.root});t.render.apply(t,o)}:ta(n)?function(){n.apply(this,[e.root].concat(o))}.bind(this):ea(n)||na(n)?function(){e.root.textContent=n}:function(){e.root.textContent=""},this.useAsyncRenderSlot?sa(r):r()}}function Ta(t,e,n){return'<ct id="_c-'.concat(e||"v"+n,'">').concat(t,"</ct>")}Gi.prototype.render=function(n,r,i,o){return this.each((function(t){var e=Go.createTreeFromHTML(n,i);return t._vid!==r._vid?(t._destory=function(){return r.destroy()},t.appendChild(Go.createDOMElement(r.axml=e,r).firstElementChild,t.innerHTML="")):(Go.applyPatch(t,Go.treeDiff(r.axml,e,[],null,null,r),r.axml=e),ka(r,o))}))};var Na=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.refs={},this._vid=Xo++,this._bounderModels={},this._updateSlotQueue=[],t=Ko(pa(Di.DEFAULT_OPTION),t||{});var e=Vo(ia(t.props)?t.props:{}),n=t.root,r=t.render,i=t.events,o=t.name,a=t.connect,u=ra(a)?a:a instanceof Ai?[a]:[],c=t.template,s=!!t.directRender;ta(r)||(c=ea(c)?(t.cache?Yo:Wo)(Ta(c.trim(),o,this._vid),e):ta(c)?c:fa,r=c!=fa?s?function(){var t=Zo(arguments);return t[0]instanceof Ai&&(t[0]=t[0].get()),this.root.innerHTML=c.apply(this,t)||"",this}:function(){var t=Zo(arguments);return t[0]instanceof Ai&&(t[0]=t[0].get()),Xi(this.root).render(c.apply(this,t),this,e,t),ka(this,t)}:fa),n&&ba(n)?(this.root=n,Qo(i,ya,Oa(this,r)),this.connect.apply(this,u)):this.mount=function(t){if(ba(t))return this.root=n=t,Qo(i,ya,Oa(this,r)),this.connect.apply(this,u),1 in arguments&&this.render.apply(this,Zo(arguments,1)),delete this.mount,this},Ko(this,t,Di.IGNORE_KEYWORDS).emit("init").off("init")};Na.prototype={constructor:Na,on:function(t,n){return ta(n)&&Bo(da(t).split("|"),(function(t){var e=t.split(":");1<e.length?Xi(this.root).on(e[0],e[1],n,this):va(this,t,n)}),this),this},off:function(t,n){return t&&ea(t)?Bo(t.split("|"),(function(t){var e=t.split(":");Xi(this.root).off(e[0],e[1],n),ma(this,t,n)}),this):Xi(this.root).off(),this},emit:function(t,n){var e=da(t),r=e.split(":");return 2<r.length?(Bo(e.split("|"),(function(t){var e=t.split(":");Xi(this.root).find(e[1]).trigger(e[0],n)}),this),this):1<r.length?(Xi(this.root).find(r[1]).trigger(r[0],n),this):ga(this,t,n)},connect:function(){var e=this,t=Zo(arguments);return t.length&&Bo(t,(function(t){t instanceof Ai&&null!=t._mid&&(e._bounderModels[t._mid]||(e._bounderModels[t._mid]=t).on("change",e.render))})),this},disconnect:function(){var e=this,t=Zo(arguments);return t.length&&Bo(t,(function(t){t instanceof Ai&&null!=t._mid&&e._bounderModels[t._mid]&&(delete e._bounderModels[t._mid],t.off("change",e.render))})),this},destroy:function(t){this.root._vid=void 0;var e=function(){Xi(this.root).off()[t?"remove":"html"](),this.emit("destroy",delete this.root)}.bind(this);sa(e)}};var Ma={DEFAULT_OPTION:{use:[]},IGNORE_KEYWORDS:["use","events","assert"]},Pa=zr.cool(),Aa=zr.type("string"),Da=zr.type("array"),Ra=zr.each("array"),ja=zr.broken;function Ia(t,e){var n=this,r=this._assert(Pa,ja),i=Aa(t)?[t]:Da(t)?t:[];return Ra(i,(function(t){return e.call(n,r,t)})),this}function Ca(e){return function(t){return t.name===e}}var La=zr.type(),qa=zr.each("array");function za(t,e){var n=[];switch(La(e)){case"regexp":qa(t,(function(t){return e.test(t.name)&&n.push(t.name)}));break;case"string":n.push(e);break;case"array":n=e}return n}function Ua(e,n){return function(t){return t[e].apply(t,n)}}var Fa=zr.extend(),Ha=zr.clone(),Ja=zr.slice(),$a=zr.has(),Ga=zr.index(),Xa=zr.index("one"),Wa=zr.type("number"),Ya=zr.type("function"),Va=zr.type("string"),Ka=zr.type("array"),Ba=zr.cool(),Qa=zr.each("array"),Za=zr.map(),tu=zr.size(),eu=zr.broken,nu=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=Fa(Ha(Ma.DEFAULT_OPTION),t),n=[];this._assert=function(t,e){return e===eu?t(n):[]},Fa(this.use(e.use),e,Ma.IGNORE_KEYWORDS)},ru=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=t({use:e});return n.back=function(){return t},n};nu.prototype={constructor:nu,on:ci,off:si,emit:fi,all:function(){return this._assert(Ja,eu)},use:function(t){return Ia.call(this,t,(function(t,e,n){(n=Jr.ram[e])&&!$a(t,n)&&t.push(n)}))},out:function(t){return Ia.call(this,t,(function(t,e){var n=Ga(t,Ca(e));Wa(n)&&t.splice(n,1)}))},get:function(t){var e,n=this;return void 0===t?e=this.all():Va(t)?e=Xa(this.all(),Ca(t)):Ka(t)&&tu(t)&&(e=Za(t,(function(t){return n.get(t)})),1===tu(e)&&(e=e[0])),e},of:function(t,e){return Qa(this.all(),Ya(t)?t:Ua(t,e)),this},swap:function(t,e,n){if(!(t&&e&&Va(t)&&Va(e)))throw new Error(f.ATOM_UNDEFINED_MODELNAME);var r=this.get(t),i=this.get(e);if(!r||!i)throw new Error(f.ATOM_MISSING_MODELINSTANCE);var o=r.get();return r.set(i.get(),n),i.set(o,n),this},select:function(t){return ru(this,za(this.all(),t))},toData:function(){return Za(this._assert(Ba,eu),(function(t){return t.get()}))},toChunk:function(){var e={};return this.of((function(t){return e[t.name]=t.get()})),e}};var iu=zr.type("required"),ou=zr.type("function"),au=zr.type("int"),uu=zr.type("array"),cu=zr.type("float"),su=zr.type("string"),fu=zr.type("object"),lu=zr.type("number"),pu=zr.type("primitive"),hu=zr.type("arraylike"),du=zr.type("boolean"),vu=zr.type(),mu=zr.convert("string"),gu=function(r,i){return function(t,e){var n=r(t);return e?n:n||yu(t,"[ validation -> verify."+mu(i)+" ]")}},yu=function(t,e){return!1},bu=function(e){return function(t){return t instanceof e}},_u={isRequired:gu(iu,"required"),isFunc:gu(ou,"function"),isInt:gu(au,"int"),isArray:gu(uu,"array"),isFloat:gu(cu,"float"),isString:gu(su,"string"),isObject:gu(fu,"object"),isNumber:gu(lu,"number"),isArrayLike:gu(hu,"arrayLike"),isPrimitive:gu(pu,"primitive"),isBool:gu(du,"boolean"),isModel:gu(bu(Ai),"model"),isView:gu(bu(Na),"view"),isAtom:gu(bu(nu),"atom")};function xu(e){return function(t){return new e(t||{})}}var Eu=zr.merge();function Su(n){return function(e){var t=function(t){return new n(Eu(e,t||{}))};return t.constructor=n,t}}var Ou=Object.create(null);Ou.version="1.0.0",Ou.struct=zr,Ou.verify=_u,Ou.atom=xu(nu),Ou.view=xu(Na),Ou.model=xu(Ai),Ou.atom.extend=Su(nu),Ou.view.extend=Su(Na),Ou.model.extend=Su(Ai);var ku=Object.freeze(Ou);return ku}));

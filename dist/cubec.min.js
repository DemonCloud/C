!(function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.cubec=e()})(this,(function(){"use strict";var s={DEFAULT_OPTION:{data:{},verify:{},emulateJSON:!0},IGNORE_KEYWORDS:["name","data","store","change","events","verify","filter","lock"],EMULATEHTTP:{get:"GET",send:"GET",post:"POST",sync:"POST",put:"POST",delete:"POST",patch:"POST",fetch:"GET"}},f={MODEL_UNEXPECT:"unexpect c.model with only data that accepts a standard JSON type object.",VIEW_MISSING_ROOT:"unexpect c.view must defined real root element node",ATOM_UNDEFINED_MODELNAME:"unexpect model name that atom can find it",ATOM_MISSING_MODELINSTANCE:"can not find target modal with atom.swap"};function h(){return self||window||this}h.VERSION="4.2.6";var t={},e=[],n="",r=e.slice,a=t.toString,i=n.trim,o=e.concat,p=eval,u=Object.freeze({}),c=h();function l(t,e){h[e]=function(){return t}}function d(e,t){h[t]=function(t){return e[Ve(W(t).toLowerCase())]||e.default}}function v(n,t,r){return at(t,r?function(t,e){(T(r)?pt(r,e):null!=r&&e===r)||(n[e]=t)}:function(t,e){n[e]=t}),n}function m(t,e,n){return v(v(j(t)?[]:{},t),e,n)}function g(t,e,n){return x(e)?Object.defineProperties(t,e):Object.defineProperty(t,e,n)}function y(t){var e=et(arguments,1);return function(){return t.apply(null,e.concat(et(arguments)))}}function b(t,e){return function(){return(e.apply(null,arguments)?t:X).apply(null,arguments)}}function _(t){return"function"==typeof t}function x(t){return!!t&&("object"==typeof t||_(t))}function E(t){return"string"==typeof t||t+""===t}function O(t){return"boolean"==typeof t&&!!t===t}function S(t){return"number"==typeof t&&t===+t}function w(t){return null==t||"object"!=typeof t}function k(t){return t&&A(t,"RegExp")}var T=Array.isArray,N=/^[a-z$_]+[a-z$_0-9]*$/i;function M(t){return null!=t&&N.test(t)}function P(t){return 0 in arguments&&void 0!==t}function A(t,e){return a.call(t)==="[object "+e+"]"}function j(t){return!!t&&!_(t)&&x(t)&&S(t.length)}function D(t){return"number"==typeof t&&t!=t}function R(t){return+t===t&&t%1==0}function C(t){return+t===t&&t%1!=0}function L(t){return t instanceof Date}function I(t){return E(t)?!Fn(t):w(t)||!Fn(t)}function q(t){return x(t)&&0<t.nodeType&&(t instanceof Node||t instanceof Element)}function U(t){return t instanceof Element}function z(t){return t instanceof Node}function F(t){var e=Function.prototype.toString,n=Object.prototype.hasOwnProperty,r=RegExp("^"+e.call(n).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");try{var i=e.call(t);return r.test(i)}catch(t){return!1}}var H=["array","function","null","undefined","arguments","boolean","string","number","date","regexp","nodeList","htmlcollection"];function J(t){var e=[T(t),_(t),null===t,void 0===t,A(t,"Arguments"),A(t,"Boolean"),A(t,"String"),A(t,"Number"),A(t,"Date"),A(t,"RegExp"),A(t,"NodeList"),A(t,"HTMLCollection")];return H[xt(e,jt(!0))]||"object"}function $(t){return t}function G(){}function X(t){return t}function W(t){return null!=t?_(t.toString)?t.toString():t+"":""}function Y(t){return+t&&"number"==typeof+t?+t:t>>0}function V(t){var e=parseInt(~t.indexOf("#")?t.substr(1):t,16);return{r:e>>16,g:(65280&e)>>8,b:255&e}}function B(t){return((1<<24)+(t.r<<16)+(t.g<<8)+t.b).toString(16).substr(1)}function K(t){var e=[];return x(t)||A(t,"String")?e=Jn(t):null!=t&&e.push(t),e}function Q(t){return-Y(t)}function Z(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function tt(){return et(arguments)}function et(t,e,n){return j(t)?r.call(t,e,n):[]}function nt(t){return null!=t?T(t)||E(t)?Tt(Object.keys(t),Y):Object.keys(t):[]}function rt(t,e){return void 0===e?t:function(){return t.apply(e,arguments)}}function it(t,e,n){var r,i=t.length,o=rt(e,n);for(r=0;r<i;r++)o(t[r],r,t);return t}function ot(e,n,t){return it(nt(e),(function(t){n.call(this,e[t],t,e)}),t),e}function at(t,e,n){return j(t)?it(t,e,n):x(t)&&null!==t?ot(t,e,n):t}function ut(t,e){if(j(t))return et(t);if(x(t)&&e){var n,r,i=nt(t),o={};for(n=i.length;n--;)o[r=i[n]]=t[r];return o}return w(t)?t:JSON.parse(JSON.stringify(t))}var ct=function(){};function st(t){var e=t;if(j(t))e=et(t).map(b(st,Gn(w)));else if(!(w(t)||t instanceof Node)){ot(t,(function(t,e){this[e]=w(t)?t:st(t)}),e=(ct.prototype=t.constructor.prototype)!==Object.prototype?new ct:{})}return e}function ft(t,e){return t.test(e)}function lt(t,e,n,r){var i=2 in arguments,o=rt(e,r);return n=i?n:wt(t),et(t,i?0:1).reduce(o,n)}function ht(t,e,n,r){var i=2 in arguments,o=rt(e,r);return n=i?n:kt(t),et(t,0,i?void 0:-1).reduceRight(o,n)}function pt(t,e,n){var r,i=k(e)?ft:n?Oe:Pt,o=!1;if(j(t))for(r=t.length;r--&&!(o=i(e,t[r])););else if(x(t)){var a=nt(t);for(r=a.length;r--&&!(o=i(e,t[a[r]])););}return o}function dt(t,e,n){return pt(nt(t),e,n)}function vt(t,e,n){return n?t.splice(e,1):delete t[e]}function mt(t,e,n){for(var r=k(e)?ft:n?Oe:Pt,i=T(t),o=nt(t),a=0;a<o.length;a++)r(e,t[o[a]])&&vt(t,o[a],i)&&i&&(o.pop(),a--);return t}function gt(t,e,r){var n=[],i=k(e)?y(ft,e):_(e)?e:jt(e);return at(ut(t),(function(t,e,n){i.apply(n,arguments)&&this.push(r?e:t)}),n),n}function yt(t,e,n){return gt(t,Gn(e),n)}function bt(t,e){var n,r,i=!0;for(r=(n=nt(t)).length;r--&&(i=e(t[n[r]],n[r],t)););return i}function _t(t,e){var n,r,i=!1;for(r=(n=nt(t)).length;r--&&!(i=e(t[n[r]],n[r],t)););return i}function xt(t,e){var n=gt(t,e,!0);return 1===n.length?n.pop():n.length?n:null}function Et(t,e){var n=xt(t,e);return w(n)?n:n.pop()}function Ot(t,e){var n=xt(t,e);return w(n)?n:n.shift()}function St(t,e){var n=Ot(t,e);return null===n?n:t[n]}function wt(t){return j(t)?t[0]:t}function kt(t){return j(t)?t[t.length-1]:t}function Tt(t,r){var e=j(t),i=e?[]:{};return(e?it:ot)(t,(function(t,e,n){i[e]=this?r.call(n,t,e,n):t[r]}),_(r)),i}function Nt(e,n){var r={};return ot(e,(function(t){r[n.apply(e,arguments)]=t})),r}function Mt(t,e){var n,r,i=[],o=k(e)?y(ft,e):_(e)?e:jt(e);if(T(t))for(n=0,r=t.length;n<r;n++)o.call(t,t[n],n,t)&&i.push(t.splice(n,1).pop(n--));else if(x(t)){var a;for(a in t)if(o.call(t,t[a],a,t)){var u={};u[a]=t[a],i.push(u),delete t[a]}}return i}function Pt(t,e){return t===e}function At(t,e){return t!==e}function jt(e){return function(t){return t===e}}function Dt(t){for(var e={},n=S(wt(t)),r=0;r<t.length;r++)e[t[r]]||(e[t[r]]=!0);return Tt(nt(e),n?Y:X)}function Rt(t,e){for(var n,r=et(t),i=e?Oe:Pt,o=[],a=0;a<r.length;a++)if(void 0!==r[a])for(o.push(r[a]),n=a+1;n<r.length;n++)i(r[a],r[n])&&(r[n]=void 0);return o}function Ct(t,e){var n=_(e);return Tt(t,(function(t){return(n?e:t[e]).apply(t,arguments)}))}function Lt(t,e,n){var r=[],i=W(e);return at(t,(function(t){var e=In(t,i,n);return void 0!==e&&this.push(e)}),r),r}function It(t,n){var e={},r=_(n);return at(t,(function(t){var e=r?n(t):In(t,n);e&&(this[e]?this[e].push(t):this[e]=[t])}),e),e}function qt(t,n){var r={},i=_(n);return at(t,(function(t){var e=i?n(t):In(t,n);e&&(r[e]?this[e]+=1:this[e]=1)}),r),r}function Ut(t){var e,n,r=[],i=nt(t);for(e=0,n=i.length;e<n;e++)r.push([i[e],t[i[e]]]);return r}function zt(t){var e,n,r={};for(e=0,n=t.length;e<n;e++)r[t[e][0]]=t[e][1];return r}function Ft(t){return gt(t,Gn(y(pt,oe(et(arguments,1),!0))))}function Ht(t){var n=oe(et(arguments,1),!0);return gt(t,(function(t,e){return!pt(n,e)}))}var Jt=mt;function $t(t){for(var e,n=t.length,r=new Array(n),i=0;i<n;i++)(e=fe(0,i))!==i&&(r[i]=r[e]),r[e]=t[i];return r}function Gt(t,e){var n,r,i=parseInt(Y(e))||2,o=[];for(n=0,r=t.length;n<r;n+=i)o.push(t.slice(n,n+i));return o}function Xt(t){return gt(t,X)}function Wt(){return o.apply([],arguments)}function Yt(u){return function(){var t,e,n,r=[],i=!0,o=Wt.apply([],arguments),a=u?Oe:Pt;for(t=0;t<o.length;t++){for(n=o[t],e=0;e<o.length;e++)if(t!==e&&a(n,o[e])){i=!1;break}i&&r.push(n),i=!0}return r}}var Vt=Yt(),Bt=Yt(!0);function Kt(u){return function(){var t,e,n,r,i=et(arguments[0]),o=arguments.length,a=[];for(t=0;t<i.length;t++)if(r=!0,!pt(a,n=i[t],u)){for(e=1;e<o;e++)if(!pt(arguments[e],n,u)){r=!1;break}r&&a.push(n)}return a}}var Qt=Kt(),Zt=Kt(!0);function te(t,e){return!w(t)&&!w(e)&&(A(t,"Object")&&A(e,"Object")||j(t)&&j(e))}function ee(t){var e,n=et(arguments);return T(t)?lt(n,(function(i,t){return it(t,(function(t,e){var n=i[e],r=t;i[e]=te(n,r)?ee(n,r):r})),e=i}),[]):x(t)&&lt(n,(function(r,i){return it(nt(i),(function(t){var e=r[t],n=i[t];r[t]=te(e,n)?ee(e,n):n})),e=r}),{}),e}function ne(t,e){return et(t,Y(e)||1)}function re(t,e){return et(t,0,-(Y(e)||1))}function ie(t,e){var n,r=et(t),i=void 0===this?"shift":"pop",o=k(e)?y(ft,e):_(e)?e:jt(e);for(n=r.length;n--&&!o(r[i]()););return r}function oe(){var t=Wt.apply([],arguments),n=!!A(kt(t),"Boolean")&&t.pop();return lt(et(t),(function(t,e){return t.concat(n&&T(e)?oe(e,n):e)}),[])}var ae="0123456789",ue="abcdefghijklmnopqrstuvwxyz",ce=ue.toUpperCase(),se="~`!@#$%^&*(){}[]-+=_|/.,><:;";function fe(t,e){return S(e)||(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}function le(t,e,n){S(e)||(e=t,t=0);var r=Math.random()*(e-t)+t;return Y(n)?+r.toFixed(n):r}function he(t){return 100*Math.random()<Math.max(1,Math.min(Y(t||50),99))}function pe(t,e){var n=t?ae+se:"";return(n=(e?ce:ue)+n).charAt(fe(0,Fn(n)-1))}function de(t){return(t?"#":"")+B({r:fe(0,255),g:fe(0,255),b:fe(0,255)})}function ve(t,e,n){for(var r=Y(t)||2,i=[];r--;)i[r]=pe(e,n);return i.join("")}function me(){var t=Hn();return new Date(t+(he()?X:Q)(fe(0,t)))}function ge(t){return fe(1,(t=0<Y(t)?Y(t):2)%2==0?t:t+1)}function ye(t,e){var n=et(arguments,2),r=Sr[e]||Sr.default;return Tt(or(t,0),(function(){return r.apply(null,n)}))}function be(i){var o=et(arguments,1);return function(){for(var t=0,e=o.slice(),n=0,r=e.length;n<r;n++)e[n]===h&&(e[n]=arguments[t++]);for(;t<arguments.length;)e.push(arguments[t++]);return i.apply(this,e)}}function _e(t,e){var n;return function(){return 0<--t?n=e.apply(this,arguments):e=null,n}}function xe(t,e){return be(_e,(Y(e)||1)+1)(t)}function Ee(t){return xe(t)}function Oe(t,e){if(t===e||a.call(t)!==a.call(e)||w(t)&&w(e))return t===e;if(t.toString()===e.toString())if(T(t)){if(t.length===e.length){for(var n=t.length;n--;)if(!Oe(t[n],e[n]))return!1;return!0}}else{var r=nt(t),i=nt(e),o=r.length;if(r.length===i.length){for(;o--;)if(!Oe(t[r[o]],e[r[o]]))return!1;return!0}}return!1}var Se=/[\t\r\n\f\x20]/g,we=/([^&=]+)=?([^&]*)/g;function ke(t){var e={};return it(t,(function(t){e[t.name]=t.value})),e}function Te(t){return decodeURIComponent(t.replace(/\+/g," "))}function Ne(t){return encodeURIComponent(t).replace(" ","%20")}function Me(t){for(var e,n=W(t).split("#").shift(),r=n.indexOf("?"),i={},o=~r?n.substr(r+1):n;e=we.exec(o);)i[Te(e[1])]=Te(e[2]);return delete i[o],i}function Pe(t){var e,n=ut(t);for(e in n)n[e]=Ne(x(n[e])?JSON.stringify(n[e]):n[e]);return JSON.stringify(n).replace(/["{}]/g,"").replace(/:/g,"=").replace(/,/g,"&").replace(Se,"")}var Ae={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"$quot;","'":"&#x27;","`":"&#x60"},je={"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"',"&#x27;":"'","&#x60;":"`"},De=/\\|'|\r|\n|\u2028|\u2029/g,Re={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Ce=/[&<">'](?:(amp|lt|quot|gt|#39);)?/g,Le=/&((g|l|quo)t|amp|#39);/g,Ie=/<script\b[^>]*>(.*?)<\/script>/gi,qe=/<!--([\s\S]*?)-->/gi,Ue=/[\t\r\n\f]/gim,ze=/[A-Z]/g,Fe="[\\s\\x20\\xA0\\uFEFF]+",He=new RegExp(Fe,"g"),Je=new RegExp("^"+Fe,"g"),$e=new RegExp(Fe+"$","g"),Ge=new RegExp(">"+Fe+"<","g"),Xe=new RegExp("<"+Fe,"g"),We=new RegExp(Fe+">","g"),Ye=new RegExp("</"+Fe,"g");function Ve(t){return i.call(t)}function Be(t){return t.replace(Je,"")}function Ke(t){return t.replace($e,"")}function Qe(t){var e=~t.search("-")?"-":~t.search("_")?"_":"";if(e){var n=1;for(e=t.split(e);n<e.length;n++)e[n]=Ze(e[n]);return e.join("")}return t}function Ze(t){return t.charAt(0).toUpperCase()+t.substr(1)}function tn(t){return Ve(t).replace(Ue,"").replace(He," ").replace(Ge,"><").replace(Xe,"<").replace(We,">").replace(Ye,"</")}function en(t,e,n){var r=n?"toUpperCase":"toLowerCase",i=W(e)||"-";return t.replace(ze,(function(t,e){return(0<e?i:"")+t[r]()}))}function nn(t){return Ae[t]||t}function rn(t){return je[t]||t}function on(t){return"\\"+Re[t]}function an(t){return+t===t?t:W(t).replace(Ce,nn)}function un(t){return+t===t?t:W(t).replace(Le,rn)}function cn(t){return t.replace(Ie,"").replace(qe,"")}function sn(t){return tn(t.replace(qe,""))}var fn={escape:"{{-([\\s\\S]+?)}}",interpolate:"{{#([\\s\\S]+?)}}",command:"{{\\*([\\s\\S]+?)}}",evaluate:"{{([\\s\\S]+?)}}"},ln=/^([\S]+)\s?([\s\S]+)?/,hn=/[\[\]]*/g;function pn(t){var e=t,n=(e||"").trim(),r=n.slice(0,3),i=n.slice(0,5),o=n.slice(0,7),a=n[n.length-1];return"/if"!==n&&"/for"!==n&&"/"!==n||(e="}"),"}"!==a&&"{"!==a&&("if "===r||"if("===r?e="if("+n.slice(2)+"){":"elseif"===o||"elseif("===o?e="}else if("+n.slice(6)+"){":"elif "===i||"elif("===i?e="}else if("+n.slice(4)+"){":"else"===i&&(e="}else{")),e}function dn(t){var e="",n=ln.exec(Ve(t)),r=n[1],i=n[2];if(r)switch(r.toLowerCase()){case"/":case"end":case"/for":case"/each":case"/if":case"/exist":e="';}); _p+='";break;case"if":case"exist":e="'; var "+(i=i.split(" then "))[0]+" = "+i[0]+" || false; _ext("+i[0]+","+(i[1]?i[1].toString()+",":"")+"function(){ _p+='";break;case"for":case"each":e=vn("op",(i=i.split(" in "))[1],i[0]);break;case"not":case"cat":case"extend":e=mn(r,(i=i.split(" with "))[1],i[0]);break;default:e=mn(r,(i=i.split(" use "))[0],i[1]||"",!0)}return e}function vn(t,e,n){return"'; struct."+t+"()("+e+",function("+n.replace(hn,"")+"){ _p+='"}function mn(t,e,n,r){var i=t.split(":");return"'; "+(r?e+"=":"")+"struct."+i[0]+'("'+(i[1]||"")+'")('+e+","+n.replace(hn,"")+"); _p+='"}var gn={line:/[\r\n\f]/gim,quot:/\s*;;\s*/gim,space:/[\x20\xA0\uFEFF]+/gim,assert:/_p\+='(\\n)*'[^+]/gim,comment:/<!--(.*?)-->/gim,tagleft:/\s{2,}</gim,tagright:/>\s{2,}/gim};function yn(a,t,e){var n,r,u=0,c="_p+='",i,o=x(t)?e:E(t)?t:"",s=x(t)?t:{},f=et(arguments,2),l=new RegExp(this.escape+"|"+this.interpolate+"|"+this.command+"|"+this.evaluate+"|$","g");Ve(a).replace(l,(function(t,e,n,r,i,o){return c+=a.slice(u,o).replace(De,on),u=o+t.length,e?c+="'+((_t=("+e+"))==null?'':_(_t))+'":n?c+="'+((_t=("+n+"))==null?'':_t)+'":r?c+=dn(r,c):i&&(c+="';"+pn(i)+";_p+='"),t})),c=c.replace(gn.line,"").replace(gn.comment,"").replace(gn.assert,"").replace(gn.quot,";").replace(gn.space," ").replace(gn.tagright,"> ").replace(gn.tagleft," <"),c="with(__("+(o?"{}":"__({},_x_||{})")+",_bounds)){ "+c+"'; }",c="var _t,_d,_ext=struct.exist(),_=struct.html('encode'),__=struct.extend(),_p='';  try{ "+c+' return _p; }catch(e){ console.error("[cubec view] Template rendering Error!"); console.error("[cubec view] Template exec error rendering data as: ",arguments[2]); throw e }';try{r=p("(function(_bounds,struct,"+(o||"_x_")+(f.length?","+f.toString():"")+"){ "+c+" })")}catch(t){throw console.error("[cubec view] Template parser Error!"),t.res=c,t}return i=[s,h],n=function(){return Ve(r.apply(this,i.concat(et(arguments))))},n}var bn=yn.bind(fn);function _n(){return $n(bn.apply(this,arguments))}function xn(t){var r={};return it(t?t.split(";"):[],(function(t){var e=(t||"").search("=");if(~e){var n=Ve(t.substr(0,e));n.length&&(r[n]=Ve(t.substr(e+1)))}})),r}function En(t){var e=et(arguments),n=e.length,r=xn(document.cookie);if(n){if(1===n)return r[t];var i=new Date;return i.setDate(i.getDate()+365),document.cookie=Ve(e[0]+"="+(e[1]||"")+";expires="+(e[2]||i.toUTCString())+";path="+(e[3]||"/")+";domain="+(e[4]||"")+";"+(e[5]?"secure":"")),!0}return r}var On={"application/x-www-form-urlencoded":0,"application/json":1};function Sn(t,e,n){if(t)switch(e){case 0:return Pe(n||{});case 1:return JSON.stringify(n||{});default:return Pe(n||{})}return n}function wn(t){var i=v({url:"",type:"GET",param:u,charset:"utf-8",vaild:!0,cache:!1,success:G,error:G,loading:G,loadend:G,header:u,username:null,password:null,timeout:0,aysnc:!0,emulateJSON:!0,contentType:!0},t||{}),o=c.localStorage;if(_(i.param)&&(i.param=i.param()),i.cache){o.getItem("_")||o.setItem("_","{}");var e=JSON.parse(o.getItem("_"))[i.url||c.location.href.split("#").shift()];if(void 0!==e)return i.sucess.call(c,e)}var n,a=new XMLHttpRequest;return"GET"===i.type.toUpperCase()&&i.param&&(i.url+=(~i.url.search(/\?/g)?"&":nt(i.param).length?"?":"")+Pe(i.param),i.param=null),a.addEventListener("loadstart",i.loading),a.addEventListener("loadend",i.loadend),a.open(i.type,i.url,i.aysnc,i.username,i.password),n=x(i.header)&&i.header["Content-Type"]||"application/x-www-form-urlencoded",i.header!==u&&x(i.header)&&ot(i.header,(function(t,e){a.setRequestHeader(e,t)})),"POST"===i.type.toUpperCase()&&!0===i.contentType&&-1===(n||"").search("json")&&a.setRequestHeader("Content-Type",n+";chartset="+i.charset),a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.onreadystatechange=function(t){if(4===a.readyState&&a.responseText){var e=a.status;if(200<=e&&e<300||304===e){var n;try{n=i.emulateJSON?JSON.parse(a.responseText):a.responseText}catch(t){return i.error.call(c,a,t,"json parser error")}if(i.success.call(c,n,a,t),i.cache){var r=JSON.parse(o.getItem("_"));r[i.url||c.location.href.split("#")[0]]=a.responseText,o.setItem("_",JSON.stringify(r))}}else i.error.call(c,a,t)}},Y(i.timeout)&&(a.timeout=1e3*Y(i.timeout),a.ontimeout=function(){4===a.readyState&&a.responseText||i.error.call(c,a),a.abort()}),a.send(i.param?x(i.param)?Sn(i.contentType,On[n],i.param):i.param:null),a}function kn(t){var e=v({url:"",key:"callback",param:u,timeout:5,error:G,success:G,callback:("structJSTP"+Math.random()).replace(".","")},t||{});_(e.param)&&(e.param=e.param());var n=e.url+"?"+Pe(e.param)+(nt(e.param).length?"&":"")+e.key+"="+e.callback,r=document.createElement("script");r.src=n,c[e.callback]=function(t){document.body.removeChild(r,pr(e.timesetup)),c[e.callback]=null,e.success(t)},document.body.append(r),Y(e.timeout)&&(e.timesetup=hr((function(){document.body.removeChild(r),c[e.callback]=null,e.error()}),1e3*e.timeout))}function Tn(t,e,n,r){return _(e)&&(r=n,n=e,e=u),wn({url:t,param:e,success:n,error:r})}function Nn(t,e,n,r){return _(e)&&(r=n,n=e,e=u),wn({url:t,type:"POST",param:e,success:n,error:r})}var Mn={},Pn=0;function An(t,e,n){var r=t._eid||0;return 0===r&&g(t,"_eid",{value:r=++Pn,writable:!1,enumerable:!1,configurable:!0}),Mn[r]||(Mn[r]={}),Mn[r][e]||(Mn[r][e]=[]),pt(Mn[r][e],n)||Mn[r][e].push(n),t}function jn(t,e,n){var r=t._eid||0;return r&&Mn[r]&&(Mn[r][e]?mt(Mn[r][e],n).length&&n||delete Mn[r][e]:e||n||(delete t._eid,delete Mn[r])),t}function Dn(t,e,n){var r=!1,i=t._eid||0;return i&&Mn[i]&&(r=_(n)&&Mn[i][e]?pt(Mn[i][e],n):Fn(Mn[i][e])),!!r}function Rn(t,e){var n=(x(e)?e._eid:0)||0;return n&&(g(t,"_eid",{value:++Pn,writable:!1,enumerable:!1,configurable:!0}),Mn[t._eid]=st(Mn[n])),t}function Cn(t,e,n){var r=t._eid||0;n=n||[],r&&Mn[r]&&""!==e&&ot(Mn[r][e],(function(t){t.apply(this,n)}),t)}function Ln(t,e,n){return it(W(e).split(","),(function(t){Cn(this,Ve(t),n)}),t),t}function In(t,e,n){var r,i,o=W(e||"").split(".");if(1===o.length)t.hasOwnProperty(e)&&(r=t[e]);else for(i=0,r=t;i<o.length&&!w(r=r[o[i]]);i++);if(n){var a=et(arguments,3);_(n)?r=n.apply(r,(a.unshift(r),a)):E(n)&&(r=_(r[n])?r[n].apply(r,a):r[n])}return r}function qn(t,e,n){var r,i,o,a,u=(e||"").split(".");if(1===u.length)t[e]=n;else{for(o=0,r=t,i=u.pop();o<u.length;o++)r=null==(a=r[u[o]])?{}:a;r[i]=n}return t}function Un(t,e){var n,r,i,o=(e||"").split(".");if(1===o.length)t.hasOwnProperty(e)&&delete t[e];else{for(r=0,n=t,i=o.pop();r<o.length;r++)n=n[o[r]];T(n)?n.splice(Y(i),1):delete n[i]}return t}function zn(t,e){return 1<Y(e)?et($t(t),0,Y(e)):t[fe(Fn(t)-1)]}function Fn(t){return _(t)||null==t||D(t)?0:S(t.length)?t.length:x(t)?nt(t).length:0}function Hn(){return(new Date).getTime()}function Jn(t,e){var n=[],r=E(e);return A(t,"String")?t.split(""):(at(t,(function(t){n.push(r?In(t,e):t)})),n)}function $n(n,r){var i,o=[];return function(){var t,e=et(arguments);for(i=o.length;i--;)if(Oe(o[i][0],e))return o[i][1];return o.push([e,t=n.apply(r||this,e)]),t}}function Gn(t,e){var n=k(t)?y(ft,t):t;return _(n)?function(){return!n.apply(e,arguments)}:y(At,n).bind(e)}function Xn(){var e=et(arguments);return function(t){return lt(e,(function(t,e){return e(t)}),t)}}function Wn(t,e){if(x(t)&&E(e)&&e){var n=In(t,e);return n.sort.apply(n,et(arguments,2)),t}return T(t)?t.sort.apply(t,et(arguments,1)):t}function Yn(t){for(var e,n,r=0,i=t.length;r<i;r++){for(e=t[r],n=r-1;0<=n&&t[n]>e;)t[n+1]=t[n],n--;t[n+1]=e}return t}function Vn(t,e){return x(t)&&E(e)&&e?(Yn(In(t,e)),t):T(t)?Yn(t):t}function Bn(t,e,n){for(var r=t[n],i=e,o=e;i<n;i++)t[i]<r&&Z(t,i,o,o++);return Z(t,n,o),o}function Kn(t,e,n){if(!(n<e)){var r=Bn(t,e,n);Kn(t,e,r-1),Kn(t,r+1,n)}}function Qn(t){return Kn(t,0,t.length-1),t}function Zn(t,e){return x(t)&&!T(t)&&E(e)?(Qn(In(t,e)),t):T(t)?Qn(t):t}function tr(t){var e=et(arguments,1);t&&kt(e).apply(this,e)}function er(){return it(tt.apply(null,arguments),Object.freeze).pop()}function nr(t,e,n){var r;return function(){r||hr((t.apply((r=1,n),arguments),function(){r=0}),e)}}function rr(){return new ir(arguments)}function ir(t){g(this,{"-":{value:0 in t?t:void 0,writable:!0,enumerable:!1,configurable:!1},"=":{value:[],writable:!1,enumerable:!1,configurable:!1}})}function or(t,e){var n,r=[];for(n=0;n<t;n++)r[n]=e;return r}function ar(t,n){var r={};return T(t)&&T(n)&&it(t,(function(t,e){r[t]=n[e]})),r}ir.prototype.value=function(){return Xn.apply(null,this["="].splice(0,Fn(this["="]))).apply(null,void 0===this["-"]?arguments:this["-"])};var ur="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",cr=c.btoa||function(t){for(var e,n,r=W(t),i="",o=0,a=ur;r.charAt(0|o)||(a="=",o%1);i+=a.charAt(63&e>>8-o%1*8)){if(255<(n=r.charCodeAt(o+=.75)))throw new Error("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");e=e<<8|n}return i},sr=c.atob||function(t){var e=W(t).replace(/[=]+$/,""),n="";if(e.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,i,o=0,a=0,u=ur;i=e.charAt(a++);~i&&(r=o%4?64*r+i:i,o++%4)?n+=String.fromCharCode(255&r>>(-2*o&6)):0)i=u.indexOf(i);return n};function fr(t){return cr(unescape(encodeURIComponent(W(t))))}function lr(t){return decodeURIComponent(escape(sr(W(t).replace(/\s/g,""))))}function hr(t,e){return setTimeout(t,Y(e))}function pr(t){clearTimeout(t)}var dr={obj:x,object:x,arr:T,array:T,arraylike:j,str:E,string:E,bool:O,boolean:O,num:S,number:S,fn:_,func:_,nan:D,prim:w,primitive:w,idt:M,identifier:M,def:A,define:A,int:R,float:C,double:C,date:L,ept:I,empty:I,dom:q,elm:U,element:U,node:z,text:z,native:F,need:P,require:P,required:P,type:J,default:J},vr={str:W,string:W,num:Y,number:Y,arr:K,array:K,hex:B,rgb:V,minus:Q,default:W},mr={arr:it,array:it,obj:ot,object:ot,each:at,default:at},gr={key:dt,index:dt,exist:pt,default:pt},yr={first:Ot,last:Et,single:St,one:St,index:xt,default:xt},br={key:Nt,hook:Ct,map:Tt,default:Tt},_r={fast:Dt,slim:Rt,default:Rt},xr={un:zt,unpair:zt,pair:Ut,default:Ut},Er={at:Ht,with:Jt,all:Ft,default:Ft},Or={left:ne,right:re,lefto:ie,leftto:ie,righto:ie.bind(!0),rightto:ie.bind(!0),default:ne},Sr={int:fe,float:le,double:le,str:ve,word:ve,string:ve,bool:he,boolean:he,char:pe,letter:pe,character:pe,arr:ye,array:ye,date:me,hex:de,dice:ge,default:Math.random},wr={parse:Me,str:Pe,stringify:Pe,serialize:Pe,query:ke,requery:ke,default:Me},kr={encode:an,decode:un,strip:cn,zip:sn,default:Xn(cn,sn)},Tr={trim:Ve,trimleft:Be,trimright:Ke,came:Qe,camelize:Qe,capit:Ze,capitalize:Ze,collapse:tn,rize:en,rizewith:en,default:W},Nr={get:Tn,fetch:Tn,put:Nn,post:Nn,jsonp:kn,cors:kn,ajax:wn,default:wn},Mr={on:An,add:An,bind:An,off:jn,remove:jn,unbind:jn,has:Dn,exist:Dn,copy:Rn,extend:Rn,emit:Ln,trigger:Ln,dispatch:Ln,default:Ln},Pr={get:In,set:qn,rm:Un,not:Un,remove:Un,default:In},Ar={a2b:sr,atob:sr,btoa:cr,b2a:cr,utob:fr,u2b:fr,btou:lr,b2u:lr,default:sr},jr={left:lt,right:ht,default:lt},Dr={native:Wn,q:Zn,i:Vn,quick:Zn,insert:Vn,default:Wn},Rr={fast:Vt,slim:Bt,default:Vt},Cr={fast:Qt,slim:Zt,default:Qt},Lr={axt:_n,cache:_n,default:bn},Ir={chain:rr,define:g,extend:v,depextend:m,keys:nt,noop:G,clone:ut,cloneDeep:st,depclone:st,not:mt,cat:Mt,slice:et,find:gt,filter:gt,reject:yt,every:bt,some:_t,chunk:Gt,compact:Xt,pluck:Lt,groupBy:It,countBy:qt,concat:Wt,cast:tt,shuffle:$t,first:wt,last:kt,flat:oe,merge:ee,auto:zn,part:xe,once:Ee,eq:Oe,cookie:En,values:Jn,memoize:$n,negate:Gn,link:Xn,size:Fn,now:Hn,exist:tr,lock:er,cool:X,hz:nr,fill:or,combined:ar,ayc:hr,cyc:pr,v8:$},qr={op:mr,each:mr,map:br,has:gr,diff:Rr,intsec:Cr,type:dr,sort:Dr,html:kr,unique:_r,convert:vr,pull:Er,param:wr,ajax:Nr,event:Mr,prop:Pr,drop:Or,pairs:xr,index:yr,random:Sr,string:Tr,reduce:jr,assembly:Ar,doom:Lr};ot(Ir,(function(t,e){ir.prototype[e]=function(){return this["="].push(t),this},l(t,e)})),ot(qr,(function(e,t){ir.prototype[t]=function(t){return this["="].push(e[Ve(W(t).toLowerCase())]),this},d(er(e),t)})),h.root=c,h.broken=u,h.toString=W,h.prototype=h.__proto__=null;var Ur=er($(h)),zr=window.localStorage,Fr="CUBEC@",Hr=function(t){return t.split("").reverse().join("")},Jr={t:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",ram:{},kAt:function(t,e){return t.charCodeAt(~~(e%t.length))},ecd:function(t){var e,n,r,i,o,a,u=0,c="";if(!t)return t;for(;e=(o=t[u++]<<16|t[u++]<<8|t[u++])>>18&63,n=o>>12&63,r=o>>6&63,i=63&o,c+=this.t.charAt(e)+this.t.charAt(n)+this.t.charAt(r)+this.t.charAt(i),u<t.length;);return((a=t.length%3)?c.slice(0,a-3):c)+"===".slice(a||3)},dcd:function(t){var e,n,r,i,o,a,u=0,c=[];if(!t)return t;for(t+="";e=(a=this.t.indexOf(t.charAt(u++))<<18|this.t.indexOf(t.charAt(u++))<<12|(i=this.t.indexOf(t.charAt(u++)))<<6|(o=this.t.indexOf(t.charAt(u++))))>>16&255,n=a>>8&255,r=255&a,c.push(e),64!==i&&(c.push(n),64!==o&&c.push(r)),u<t.length;);return c},incry:function(t,e){for(var n=0,r=t.length,i=[];n<r;n++)i[n]=t[n].charCodeAt(0)^this.kAt(e,n);return this.ecd(i)},decyt:function(t,e){for(var n=0,r=(t=this.dcd(t)).length;n<r;n++)t[n]=String.fromCharCode(t[n]^this.kAt(e,n));return t.join("")},set:function(t,e){zr.setItem(Fr+this.incry(t,Hr(t)),this.incry(encodeURIComponent(JSON.stringify(e)),t))},get:function(t){var e=zr.getItem(Fr+this.incry(t,Hr(t)));return e?JSON.parse(decodeURIComponent(this.decyt(e,t))):0},rm:function(t){zr.removeItem(Fr+this.incry(t,Hr(t)))}};function $r(t,e){return this.on(e,t)}var Gr=Ur.each("object"),Xr=Ur.define();function Wr(n,t){return Gr(t,(function(t,e){Xr(n,e,{value:t,writable:!1,enumerable:!1,configurable:!1})})),n}var Yr=Ur.broken,Vr=Ur.keys(),Br=Ur.prop("get"),Kr=Ur.size(),Qr=Ur.clone();function Zr(t,e){if(!e._v)return!0;for(var n,r,i=e._asv(Yr),o=[],a=Vr(i),u=0,c=a.length;u<c;u++)if(!(0,i[a[u]])(n=Br(t,a[u]))){o.push(a[u],n),console.error("model of key ( ".concat(a[u]," ) except error with model verify, please check your model verify define!"));break}return r=!Kr(o),e.emit("verify:"+(r?"success":"fail"),r?[Qr(t)]:o),r}var ti=Ur.prop("set");function ei(t,e,n){return!n._v||Zr(ti(n.get(),t,e),n)}var ni=Ur.ajax();function ri(e,t,n,r,i,o){var a=this,u=arguments;if(this.isLock)return this;var c={url:t||this.url||"",type:s.EMULATEHTTP[e],async:!0,param:n||this.ajaxParam||{},header:o||this.ajaxHeader||{}};return"POST"===c.type&&this.emulateJSON&&(c.header["Content-Type"]="application/json"),c.header["X-HTTP-Method-Override"]=e,c.success=function(){r.apply(a,u),a.emit(e+":success",u)},c.error=function(){try{i.apply(a,u)}catch(t){return a.emit(e+":error",u)}a.emit(e+":error",u)},this.emit(e,[ni(c),c])}var ii=Ur.ajax();function oi(r,i,o,a){var u=this;return this.isLock?this:new Promise(function(e,n){var t={url:i||u.url||"",type:s.EMULATEHTTP[r],async:!0,param:o||u.fetchParam||{},header:a||u.fetchHeader||{}};t.header["X-HTTP-Method-Override"]=r,t.success=function(t){e(t)},t.error=function(t){n(t)},u.emit(r,[ii(t),t])})}var ai=Ur.type("func"),ui=Ur.event("on"),ci=Ur.event("off"),si=Ur.event("emit");function fi(t,e){return ai(e)&&ui(this,t,e),this}function li(t,e){return ci(this,t,e)}function hi(t,e){return si(this,t,e||[])}var pi=Ur.broken,di=Ur.extend(),vi=Ur.clone(),mi=Ur.type("string"),gi=Ur.type("bool"),yi=Ur.type("object"),bi=Ur.type("array"),_i=Ur.type("prim"),xi=Ur.type("func"),Ei=Ur.each("object"),Oi=Ur.each("array"),Si=Ur.cool(),wi=Ur.size(),ki=Ur.prop("get"),Ti=Ur.prop("set"),Ni=Ur.prop("rm"),Mi=Ur.merge(),Pi=Ur.noop(),Ai=Ur.link(),ji=Ur.slice(),Di=Ur.eq(),Ri=0;function Ci(){var t=ji(arguments),e={};return 1<t.length?Oi(t,(function(t){return e=Mi(e,t)})):e=t[0],e}var Li=function(){var n=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=di(vi(s.DEFAULT_OPTION),t);if(!yi(e.data)||bi(e.data))throw new Error(f.MODEL_UNEXPECT);var r=e.events,i=e.verify,o=mi(e.name),a=gi(e.store)&&e.store&&o,u=(this.isLock=!!e.lock,[]),c=e.data||{};a&&Jr.get(e.name);Ei(r,$r,Wr(this,{name:o?e.name:void 0,_ast:function(t,e){var n=xi(t)?t:Si;return e===pi?n(c):{}},_mid:Ri++,_asl:function(t){return t===pi?n.isLock:null},_asv:function(t){return t===pi?i:{}},_ash:function(t){return t===pi?u:[]},_v:!!wi(i),_l:function(t,e){return e===pi?n.isLock=!!t:void 0},_c:function(t,e){return e===pi?c=t:{}},_s:a})),o&&(Jr.ram[this.name]=this),di(this,e,s.IGNORE_KEYWORDS).emit("init").off("init")};Li.prototype={constructor:Li,on:fi,off:li,emit:hi,lock:function(){return this._l(!0,pi),this.emit("lock")},unlock:function(){return this._l(!1,pi),this.emit("unlock")},get:function(t,e){var n=this._ast(Si,pi);return vi(t||0===t?ki(n,t,e):n)},set:function(t,e,n){if(this.isLock)return this;var r,i=this._ast(Si,pi),o=this._ash(pi),a=arguments.length,u=!_i(t)&&yi(t);if(a)if(u)n=e,(r=t)&&!Di(i,r)&&Zr(r,this)&&(o.push(vi(i)),this._c(r,pi,this.change=!0),this._s&&Jr.set(this.name,r),n||this.emit("change",[vi(r)]));else if(!Di(ki(i,t),e)&&ei(t,e,this)&&(o.push(vi(i)),Ti(i,t,e,this.change=!0),this._s&&Jr.set(this.name,i),!n)){this.emit("change",[vi(i)]);var c=t.split("."),s=c[0],f={};f[s]=vi(i[s]),1<c.length&&this.emit("change:"+s,[f]),this.emit("change:"+t,[f])}return this},remove:function(t,e){if(this.isLock)return this;var n=this._ast(Si,pi),r=this._ash(pi);if(_i(t)&&null!=t&&(r.push(vi(n)),Ni(n,t),this._s&&Jr.set(this.name,n),!e)){this.emit("change",[vi(n)]);var i=t.split("."),o=i[0],a={};a[o]=vi(n[o]),1<i.length&&this.emit("change:"+o,[a]),this.emit("change:"+t,[a]),this.emit("remove:"+t)}return this},clear:function(t){var e={};return this.set(e,t),this._ast(Si,pi)!==e||t||this.emit("clear"),this},back:function(t){if(void 0===this._asl(pi))return this;var e,n=this._ash(pi);return n.length&&(e=n.pop())&&(this._c(e,pi,this.change=!0),t||this.emit("change,back",[e])),this},toJSON:function(){return JSON.stringify(this.get())},ajax:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=Mi({type:"get",async:!0,success:Pi,error:Pi},t);return ri.call(this,e.type,e.url,e.param,e.success,e.error,e.header)},fetch:function(t,n){var r=this,i=[],e=bi(this.url)?this.url:mi(this.url)?[this.url]:[],o=bi(t)?t:yi(t)?[t]:[],a=this.fetchFilter||Ci;(Oi(e,(function(t,e){i.push(oi.call(r,"fetch",t,o[e],n))})),1===i.length)?i[0].then((function(t){var e=a.call(r,t);r.emit("fetch:success",[e]),r.set(e)}),(function(t){console.error(t),r.emit("fetch:error",[t])})).catch((function(t){console.error(t)})):1<i.length&&Promise.all(i).then((function(t){var e=a.apply(r,t);r.emit("fetch:success",[e]),r.set(e)}),(function(t){console.error(t),r.emit("fetch:error",[t])})).catch((function(t){console.error(t)}));return this},sync:function(t,e){var n=this;return mi(t)?ri.call(this,"post",t,this.get(),(function(){return n.emit("sync:success")}),(function(t){return n.emit("sync:error",t)}),e):this},merge:function(t){return t instanceof Li&&(t=t.get()),yi(t)&&null!=t&&this.set(Mi(this.get(),t)),this},transTo:function(t,e){var n=xi(e)?e:Si;return t instanceof Li&&t.set(n(this.get())),this}};var Ii={DEFAULT_OPTION:{},IGNORE_KEYWORDS:["root","render","model","connect","events"]},qi=Ur.root,Ui=Ur.each(),zi=Ur.extend(),Fi=Ur.each("array"),Hi=Ur.type("func"),Ji=Ur.type("string"),$i=Ur.type("arraylike"),Gi=Ur.type("elm"),Xi=Ur.slice(),Wi=Ur.has(),Yi={MouseEvent:["click","dbclick","mouseup","mousedown","mouseout","mouseover","mouseenter","mouseleave"]},Vi=Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector,Bi=function(t){this.el=$i(t)?Xi(t):Gi(t)?[t]:[]},Ki=function t(e){return t.init(e)},Qi=1,Zi={},to="onfocusin"in qi,eo={focus:"focusin",blur:"focusout"},no={mouseenter:"mouseover",mouseleave:"mouseout"},ro={check:"change"},io={change:"input",input:"input"},oo=["input","keypress","keydown","keyup"],ao=-1<qi.navigator.userAgent.indexOf("Firefox"),uo=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,co={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function so(t){return t._zid||(t._zid=Qi++)}function fo(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function lo(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function ho(t,e,n,r){var i=new RegExp;return(e=fo(e)).ns&&(i=lo(e.ns)),(Zi[so(t)]||[]).filter((function(t){return t&&(!e.e||t.e==e.e)&&(!e.ns||i.test(t.ns))&&(!n||so(t.fn)===so(n))&&(!r||t.sel==r)}))}function po(t,e){return t.del&&!to&&t.e in eo||!!e}function vo(t){var e=0;if(null!=t.selectionStart)e=t.selectionStart;else if(document.selection){t.focus();var n=document.selection.createRange();n.moveStart("character",-t.value.length),e=n.text.length}return e}function mo(t,e){if(t.createTextRange){var n=t.createTextRange();return n.move("character",e),n.select()}return t.selectionStart?t.setSelectionRange(e,e,t.focus()):t.focus()}function go(t){return no[t]||io[t]||ro[t]||to&&eo[t]||t}function yo(s,t,r,f,i,o,a){var e=so(s),u=Zi[e]||(Zi[e]=[]);Ui(t.split(/\s/),(function(t){var n=fo(t);n.fn=r,n.sel=i,n.e in no&&(r=function(t){var e=t.relatedTarget;if(!e||e!==this&&!this.contains(e))return n.fn.apply(this,arguments)});var c=(n.del=o)||r;n.proxy=function(t){var e,n=t.type,r=t.target.nodeName,i="true"===t.target.contentEditable,o=Wi(oo,n)&&("INPUT"===r||"TEXTAREA"===r||i),a=new Ki.xEvent(t=Eo(t));if(t.isImmediatePropagationStopped()||o&&t.target._compositionIn)return!1;a.data=f,o&&(e=vo(t.target));var u=c.apply(s,void 0===a._args?[a]:[a].concat(a._args));return!1===u&&(t.preventDefault(),t.stopPropagation()),e&&mo(t.target,e),u},n.i=u.length,u.push(n);var e=go(n.e);e in io&&(s.addEventListener("compositionstart",(function(t){t.target._compositionIn=!0})),s.addEventListener("compositionend",(function(t){t.target._compositionIn=!1,ao||Ki(t.target).trigger("input")}))),s.addEventListener(e,n.proxy,po(n,a))}))}function bo(e,t,n,r,i){var o=so(e);Fi((t||"").split(/\s/),(function(t){Ui(ho(e,t,n,r),(function(t){delete Zi[o][t.i],e.removeEventListener(go(t.e),t.proxy,po(t,i))}))}))}function _o(){return!0}function xo(){return!1}function Eo(r,i){if(i||!r.isDefaultPrevented){i||(i=r),Ui(co,(function(t,e){var n=i[e];r[e]=function(){return this[t]=_o,n&&n.apply(i,arguments)},r[t]=xo}));try{r.timeStamp||(r.timeStamp=Date.now())}catch(t){}(void 0!==i.defaultPrevented?i.defaultPrevented:"returnValue"in i?!1===i.returnValue:i.getPreventDefault&&i.getPreventDefault())&&(r.isDefaultPrevented=_o)}return r}function Oo(t){var e,n={originalEvent:t};for(e in t)uo.test(e)||void 0===t[e]||(n[e]=t[e]);return Eo(n,t)}Ki.init=function(t){return new Bi(t)},Ki.matchz=function(t,e){return null!==t&&t!==document&&Ji(e)&&Vi.call(t,e)},Ki.event={add:yo,remove:bo},Ki.proxy=function(t,e){var n=2 in arguments&&Xi(arguments,2);if(Hi(t)){var r=function(){return t.apply(e,n?n.concat(Xi(arguments)):arguments)};return r._zid=so(t),r}if(Ji(e))return n?Ki.proxy.apply(null,(n.unshift(t[e],t),n)):Ki.proxy(t[e],t);throw new TypeError("expected function")},Ki.Event=function(t,e){var n;Ji(t)||(t=(e=t).type);var r=document.createEvent(Wi(Yi.MouseEvent,t)?"MouseEvent":"Events"),i=!0;if(e)for(n in e)"bubbles"===n?i=!!e[n]:r[n]=e[n];return r.initEvent(t,i,!0),Eo(r)},Ki.xEvent=function(t){var e;for(e in t)this[e]=t[e]},Bi.prototype={get:function(t){return 0 in arguments?this.el[+t+(t<0?this.length:0)]:this.el},each:function(t,e){return Fi(this.el,t,e||this),this},find:function(e){var n=[];return Fi(this.el,(function(t){n=Xi(t.querySelectorAll(e)).concat(n)})),Ki(n)},closest:function(t,e){for(var n,r=this.el,i=this.get(0),o=0,a=r.length;o<a;i=r[++o]){for(;i&&!n&&i!==e;)Ki.matchz(i=i.parentNode,t)&&(n=i);if(n)break}return Ki(n||[])},on:function(t,r,i,o,a){var e;return t&&!Ji(t)?(Ui(t,(function(t,e){this.on(e,r,i,t,a)}),this),this):(Ji(r)||Hi(o)||!1===o||(o=i,i=r,r=void 0),void 0!==o&&!1!==i||(o=i,i=void 0),Hi(i)&&Ji(r)&&(a=o,o=i),!1===o&&(o=xo),this.each((function(n){r&&(e=function(t){var e=Ki.matchz(t.target,r)?t.target:Ki(t.target).closest(r,n).get(0);e&&e!==n&&o.apply(a||e,[zi(t,{currentTarget:e,liveFired:n})].concat(Xi(arguments,1)))}),yo(n,t,o,i,r,e)})))},off:function(e,n,r){return e&&!Ji(e)?(Ui(e,(function(t,e){this.off(e,n,t)}),this),this):(Ji(n)||Hi(r)||!1===r||(r=n,n=void 0),!1===r&&(r=xo),this.each((function(t){bo(t,e,r,n)})))},trigger:function(e,n){return(e=Ji(e)?Ki.Event(e):Eo(e))._args=n,this.each((function(t){e.type in eo&&Hi(t[e.type])?t[e.type]():"dispatchEvent"in t?t.dispatchEvent(e):Ki(t).triggerHandler(e,n)}))},triggerHandler:function(e,n){var r,i;return this.each((function(t){(r=Oo(Ji(e)?Ki.Event(e):e))._args=n,r.target=t,Ui(ho(t,e.type||e),(function(t){return i=t.proxy(r),!r.isImmediatePropagationStopped()}))})),i},html:function(e){return this.each((function(t){t.innerHTML=_toStr(e)}))},remove:function(){return this.each((function(t){t.parentNode.removeChild(Ki(t).off().get(0))}))}};var So=Ur.prop("set"),wo=Ur.type("string"),ko=Ur.type("func"),To=Ur.type("object"),No=Ur.html("decode"),Mo=Ur.convert("string"),Po=Ur.each("array"),Ao=Ur.each("object"),jo=Ur.map(),Do=Ur.noop(),Ro=Ur.eq(),Co={class:"className",style:"style.cssText",placeholder:"@placeholder",maxlength:"@maxlength",minLength:"@minLength",max:"@max",min:"@min",href:"@href",checked:"*checked",disabled:"*disabled",readonly:"*readonly",required:"*required",selected:"*selected",controls:"*controls",ended:"*ended",muted:"*muted",hidden:"*hidden",seeking:"*seeking",paused:"*paused",loop:"*loop",autoplay:"*autoplay",multiple:"*multiple",autofocus:"*autofocus",autocomplete:"*autocomplete",draggable:"*draggable",spellcheck:"*spellcheck",translate:"*translate",specified:"*specified",defer:"*defer",async:"*async"},Lo=["no","replace","append","remove","modifytext","withtext","removetext","addattr","modifyattr","removeattr"],Io=new RegExp("</([^><]+?)>|<([^><]+?)/>|<([^><]+?)>|([^><]+)|$","g"),qo={input:1,br:1,hr:1,img:1,meta:1,area:1,base:1,col:1,isindex:1,command:1,embed:1,keygen:1,link:1,head:1,param:1,source:1,track:1,wbr:1,path:1,circle:1,ellipse:1,line:1,rect:1,use:1,stop:1,polyline:1,polygon:1},Uo=/(\S+)=["'](.*?)["']|([\w-]+)/gi,zo=/^\{|\}$/gi,Fo=/^\{([^'"\s]+)\}$/i,Ho=/^[\r\n\f\t\s]+|[\r\n\f\t\s]+$/gi,Jo=/^default[^\s]+/i,$o=function t(e,n,r){var i=Co[n]||n,o=wo(r)?No(r):r;if(Jo.test(i)){i=i.slice(7).toLowerCase();var a=e.getAttribute(i)||e[i];null!=a&&""!==a||t(e,i,o)}else"*"===i[0]?So(e,i.slice(1),"true"===o||!0===o):"@"===i[0]?e.setAttribute(i.slice(1),o):":"===i[0]?Ki(e).on(i.slice(1),o):So(e,i,o)},Go=function(t,e,n){if(":"===e[0]&&ko(n))Ki(t).off(e.slice(1),n);else if(t[e]&&!delete t[e])try{t[e]=null}catch(t){}else t.removeAttribute(e)},Xo=function(t,e,n){var r,i=e;return Fo.test(e)&&(i=void 0!==(r=n[e.replace(zo,"")])?r:e),":"===t[0]&&(i=ko(r)?r:Function("event",Mo(e))),i},Wo=function(n,t){var r={};return Ao(t,(function(t,e){n[e]===t&&(r[e]=1)})),r},Yo=[Do,function(t){var e=t.s;e&&e.parentNode&&e.parentNode.replaceChild(t.n,e)},function(t){var e=t.s;e&&e.appendChild(t.n)},function(t){var e=t.s;e.parentNode&&e.parentNode.removeChild(e)},function(t){var e=t.s;if(t.isSlot)return e._destory&&e._destory(),e.parentNode.replaceChild(t.n,e);e.textContent=No(t.c)},function(t){var e=t.s;if(t.isSlot)return e._destory&&e._destory(),e.parentNode.replaceChild(t.n,e);e.textContent=No(t.c)},function(t){t.s.innerHTML=t.n.innerHTML},function(n){Ao(n.a,(function(t,e){$o(n.s,e,t)}))},function(t){var n=t.s,r=Wo(t.o,t.a);Ao(t.o,(function(t,e){e in r||Go(n,e,t)})),Ao(t.a,(function(t,e){e in r||$o(n,e,t)}))},function(n){Ao(n.a,(function(t,e){Go(n.s,e,t)}))}],Vo=function(t,e){var n=wo(t)?t:"";if(n&&e){var r={},i=n.trim().split("::");return r.name=i[0],r.path=i[1],r.root=e,r}},Bo={treeDiff:function(t,e,n,r,i,o){if(void 0===t)n.unshift(this.createPatch(r,e,2,o));else if(void 0===e)n.push(this.createPatch(t,0,3,o));else if(t.tagName===e.tagName){if(e.isSlot||t.isSlot)return n.push(this.createPatch(t,e,5,o)),n;if(Ro(t.attributes,e.attributes)||(t.attributes&&e.attributes?n.push(this.createPatch(t,e,8,o)):t.attributes?e.attributes||n.push(this.createPatch(t,e,9,o)):n.push(this.createPatch(t,e,7,o))),t.text!==e.text)return t.text&&e.text&&t.text!==e.text?n.push(this.createPatch(t,e,4,o)):t.text?e.text||n.push(this.createPatch(t,e,6,o)):n.push(this.createPatch(t,e,5,o)),n;var a,u=t.child.length,c=e.child.length;if(u||c)if(u<c){for(a=u;a<c;a++)n.push(this.createPatch(t,e.child[a],2,o));for(a=u;a--;)this.treeDiff(t.child[a],e.child[a],n,t,e,o)}else if(c<u){for(a=u-1;c<=a;a--)n.push(this.createPatch(t.child[a],0,3,o));for(a=c;a--;)this.treeDiff(t.child[a],e.child[a],n,t,e,o)}else for(a=Math.max(u,c);a--;)this.treeDiff(t.child[a],e.child[a],n,t,e,o)}else t.tagName!==e.tagName&&n.push(this.createPatch(t,e,1,o));return n},applyPatch:function(e,t){Po(jo(t,function(t){return t.path=t.s,t.s=this.mapTreeNode(e,t.s),t}.bind(this)),(function(t){Yo[t.t].call(e,t)}))},mapTreeNode:function(t,e){for(var n,r=0,i=t.children;r<e.length&&i[e[r]];r++)i=(n=i[e[r]]).children;return n},createSelector:function(t){for(var e=[t.i];t=t.parent;)void 0!==t.i&&e.unshift(t.i);return e},createPatch:function(t,e,n,r){var i,o=this.createSelector(t),a=e.isSlot;switch(Lo[n]){case"replace":i={t:1,s:o,n:this.createDOMElement(e,r)};break;case"append":i={t:2,s:o,n:this.createDOMElement(e,r)};break;case"remove":i={t:3,s:o};break;case"modifytext":i={t:4,s:o,c:e.text,isSlot:a},a&&(i.n=this.createDOMElement(e,r));break;case"withtext":i={t:5,s:o,c:e.text,isSlot:a},a&&(i.n=this.createDOMElement(e,r));break;case"removetext":i={t:6,s:o,n:this.createDOMElement(e,r)};break;case"addattr":i={t:7,s:o,a:e.attributes};break;case"modifyattr":i={t:8,s:o,a:e.attributes,o:t.attributes};break;case"removeattr":i={t:9,s:o,a:t.attributes};break;default:i={t:0}}return i},createTreeFromHTML:function(t,o){var a,e={tagName:"__AX_VIEWROOT__",isRoot:!0,child:[]},u=e,c=e.child;return t.replace(Io,function(t,e,n,r,i){return t&&t.replace(Ho,"")&&(e?(u=u.parent,c=u.child):n?((a=this.createObjElement(n,o)).i=c.length,c.push(a),a.parent=u):r?((a=this.createObjElement(r,o)).i=c.length,c.push(a),a.parent=u,a.tagName in qo||(c=(u=a).child)):i&&i.trim()&&(u.text=i)),t}.bind(this)),e},createObjElement:function(t,e){var n=t.split(" "),r=To(e)?e:{},i=n.shift(),o=n.join(" "),a={tagName:i,child:[]};if("slot"===i&&(a.isSlot=!0),o){for(var u,c,s={};u=Uo.exec(o);)u[1]?s[u[1]]=Xo(u[1],u[2],r):c=c?(s[c]=Xo(c,u[0],r),0):u[0];a.attributes=s}return a},createDOMElement:function(t,e){var n=document.createElement(t.tagName);if(e&&t.attributes&&t.attributes.ref&&(e.refs[t.attributes.ref]=n),Ao(t.attributes,(function(t,e){$o(n,e,t)})),e&&t.isSlot){var r=Vo(t.text,n);return r&&e._updateSlotQueue.push(r),n}return t.text&&(n.textContent=No(t.text)),t.child.length&&Po(t.child,(function(t){n.appendChild(this.createDOMElement(t,e))}),this),n}},Ko=0,Qo=Ur.doom(),Zo=Ur.doom("cache"),ta=Ur.lock(),ea=Ur.extend(),na=Ur.each("array"),ra=Ur.each("object"),ia=Ur.slice(),oa=Ur.type("func"),aa=Ur.type("string"),ua=Ur.type("number"),ca=Ur.type("array"),sa=Ur.type("object"),fa=Ur.type("elm"),la=Ur.type("arraylike"),ha=Ur.prop("get"),pa=Ur.size(),da=Ur.ayc(),va=Ur.noop(),ma=Ur.link(),ga=Ur.clone(),ya=Ur.define(),ba=Ur.convert("string"),_a=Ur.event("on"),xa=Ur.event("off"),Ea=Ur.event("emit");function Oa(t,e){return this.on(e,t)}function Sa(t){if(!fa(t)&&!la(t))throw new TypeError("el must be typeof DOMElement or NodeList collections -> not "+t);return!0}function wa(t){return function(){return t.emit("beforeRender",arguments),arguments}}function ka(e,n){return function(t){return n.apply(e,t),t}}function Ta(e){return function(t){return e.root._vid=e._vid,e.emit("completeRender",t)}}function Na(e,t){var n=wa(e),r=ka(e,t),i=Ta(e);return ma(n,(function(t){return da(ma((function(){return t}),r,i)),e}))}function Ma(e,t){if(oa(t)){var n=Na(e,t.bind(e));ya(e,"render",{get:function(){return n},set:function(t){return oa(t)&&(n=Na(e,t.bind(e)),pa(e._bounderModels)&&ra(e._bounderModels,(function(t){t.off("change",e.render),t.on("change",n)}))),n},enumerable:!1,configurable:!1})}return e}function Pa(t,e){t&&t._updateSlotQueue.length&&(na(t._updateSlotQueue,Aa.bind(t,e)),t._updateSlotQueue=[])}function Aa(t,e){var n=ha(this,e.name);if(n){var r=va,i=t[0],o=e.path&&sa(i)?[ha(i,e.path)]:t;return r=n.constructor===Da&&n._isExtender?function(){var t=n({root:e.root});t.render.apply(t,o)}:n instanceof Da&&ua(n._vid)?function(){n.root?(n.root=e.root,n.render.apply(n,o)):n.mount.apply(n,[e.root].concat(o))}:oa(n)?function(){n.apply(this,[e.root].concat(o))}.bind(this):aa(n)||ua(n)?function(){e.root.textContent=n}:function(){e.root.textContent=""},this.useAsyncRenderSlot?da(r):r()}}function ja(t,e,n){return'<ct id="_c-'.concat(e||"v"+n,'">').concat(t,"</ct>")}Bi.prototype.render=function(n,r,i,o){return this.each((function(t){var e=Bo.createTreeFromHTML(n,i);return t._vid!==r._vid?(t._destory=function(){return r.destroy()},t.appendChild(Bo.createDOMElement(r.axml=e,r).firstElementChild,t.innerHTML="")):(Bo.applyPatch(t,Bo.treeDiff(r.axml,e,[],null,null,r),r.axml=e),Pa(r,o))}))};var Da=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.refs={},this._vid=Ko++,this._bounderModels={},this._updateSlotQueue=[],t=ea(ga(Ii.DEFAULT_OPTION),t||{});var e=ta(sa(t.props)?t.props:{}),n=t.root,r=t.render,i=t.events,o=t.name,a=t.connect,u=ca(a)?a:a instanceof Li?[a]:[],c=t.template,s=!!t.directRender;oa(r)||(c=aa(c)?(t.cache?Zo:Qo)(ja(c.trim(),o,this._vid),e):oa(c)?c:va,r=c!=va?s?function(){var t=ia(arguments);return t[0]instanceof Li&&(t[0]=t[0].get()),this.root.innerHTML=c.apply(this,t)||"",this}:function(){var t=ia(arguments);return t[0]instanceof Li&&(t[0]=t[0].get()),Ki(this.root).render(c.apply(this,t),this,e,t),Pa(this,t)}:va),n&&Sa(n)?(this.root=n,ra(i,Oa,Ma(this,r)),this.connect.apply(this,u)):this.mount=function(t){if(Sa(t))return this.root=n=t,ra(i,Oa,Ma(this,r)),this.connect.apply(this,u),1 in arguments&&this.render.apply(this,ia(arguments,1)),delete this.mount,this},ea(this,t,Ii.IGNORE_KEYWORDS).emit("init").off("init")};Da.prototype={constructor:Da,on:function(t,n){return oa(n)&&na(ba(t).split("|"),(function(t){var e=t.split(":");1<e.length?Ki(this.root).on(e[0],e[1],n,this):_a(this,t,n)}),this),this},off:function(t,n){return t&&aa(t)?na(t.split("|"),(function(t){var e=t.split(":");Ki(this.root).off(e[0],e[1],n),xa(this,t,n)}),this):Ki(this.root).off(),this},emit:function(t,n){var e=ba(t),r=e.split(":");return 2<r.length?(na(e.split("|"),(function(t){var e=t.split(":");Ki(this.root).find(e[1]).trigger(e[0],n)}),this),this):1<r.length?(Ki(this.root).find(r[1]).trigger(r[0],n),this):Ea(this,t,n)},connect:function(){var e=this,t=ia(arguments);return t.length&&na(t,(function(t){t instanceof Li&&null!=t._mid&&(e._bounderModels[t._mid]||(e._bounderModels[t._mid]=t).on("change",e.render))})),this},disconnect:function(){var e=this,t=ia(arguments);return t.length&&na(t,(function(t){t instanceof Li&&null!=t._mid&&e._bounderModels[t._mid]&&(delete e._bounderModels[t._mid],t.off("change",e.render))})),this},destroy:function(t){this.root._vid=void 0;var e=function(){Ki(this.root).off()[t?"remove":"html"](),this.emit("destroy",delete this.root)}.bind(this);da(e)}};var Ra={DEFAULT_OPTION:{use:[]},IGNORE_KEYWORDS:["use","events","assert"]},Ca=Ur.cool(),La=Ur.type("string"),Ia=Ur.type("array"),qa=Ur.each("array"),Ua=Ur.broken;function za(t,e){var n=this,r=this._assert(Ca,Ua),i=La(t)?[t]:Ia(t)?t:[];return qa(i,(function(t){return e.call(n,r,t)})),this}function Fa(e){return function(t){return t.name===e}}var Ha=Ur.type(),Ja=Ur.each("array");function $a(t,e){var n=[];switch(Ha(e)){case"regexp":Ja(t,(function(t){return e.test(t.name)&&n.push(t.name)}));break;case"string":n.push(e);break;case"array":n=e}return n}function Ga(e,n){return function(t){return t[e].apply(t,n)}}var Xa=Ur.extend(),Wa=Ur.clone(),Ya=Ur.slice(),Va=Ur.has(),Ba=Ur.index(),Ka=Ur.index("one"),Qa=Ur.type("number"),Za=Ur.type("func"),tu=Ur.type("string"),eu=Ur.type("array"),nu=Ur.cool(),ru=Ur.each("array"),iu=Ur.map(),ou=Ur.size(),au=Ur.broken,uu=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=Xa(Wa(Ra.DEFAULT_OPTION),t),n=[];this._assert=function(t,e){return e===au?t(n):[]},Xa(this.use(e.use),e,Ra.IGNORE_KEYWORDS)},cu=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=t({use:e});return n.back=function(){return t},n};uu.prototype={constructor:uu,on:fi,off:li,emit:hi,all:function(){return this._assert(Ya,au)},use:function(t){return za.call(this,t,(function(t,e,n){(n=Jr.ram[e])&&!Va(t,n)&&t.push(n)}))},out:function(t){return za.call(this,t,(function(t,e){var n=Ba(t,Fa(e));Qa(n)&&t.splice(n,1)}))},get:function(t){var e,n=this;return void 0===t?e=this.all():tu(t)?e=Ka(this.all(),Fa(t)):eu(t)&&ou(t)&&(e=iu(t,(function(t){return n.get(t)})),1===ou(e)&&(e=e[0])),e},of:function(t,e){return ru(this.all(),Za(t)?t:Ga(t,e)),this},swap:function(t,e,n){if(!(t&&e&&tu(t)&&tu(e)))throw new Error(f.ATOM_UNDEFINED_MODELNAME);var r=this.get(t),i=this.get(e);if(!r||!i)throw new Error(f.ATOM_MISSING_MODELINSTANCE);var o=r.get();return r.set(i.get(),n),i.set(o,n),this},select:function(t){return cu(this,$a(this.all(),t))},toData:function(){return iu(this._assert(nu,au),(function(t){return t.get()}))},toChunk:function(){var e={};return this.of((function(t){return e[t.name]=t.get()})),e}};var su=Ur.type("required"),fu=Ur.type("func"),lu=Ur.type("int"),hu=Ur.type("array"),pu=Ur.type("float"),du=Ur.type("string"),vu=Ur.type("object"),mu=Ur.type("number"),gu=Ur.type("primitive"),yu=Ur.type("arraylike"),bu=Ur.type("boolean"),_u=Ur.type(),xu=Ur.convert("string"),Eu=function(r,i){return function(t,e){var n=r(t);return e?n:n||Ou(t,"[ validation -> verify."+xu(i)+" ]")}},Ou=function(t,e){return!1},Su=function(e){return function(t){return t instanceof e}},wu={isRequired:Eu(su,"required"),isFunc:Eu(fu,"function"),isInt:Eu(lu,"int"),isArray:Eu(hu,"array"),isFloat:Eu(pu,"float"),isString:Eu(du,"string"),isObject:Eu(vu,"object"),isNumber:Eu(mu,"number"),isArrayLike:Eu(yu,"arrayLike"),isPrimitive:Eu(gu,"primitive"),isBool:Eu(bu,"boolean"),isModel:Eu(Su(Li),"model"),isView:Eu(Su(Da),"view"),isAtom:Eu(Su(uu),"atom")};function ku(e){return function(t){return new e(t||{})}}var Tu=Ur.merge();function Nu(n){return function(e){var t=function(t){return new n(Tu(e,t||{}))};return t.constructor=n,t._isExtender=!0,t}}var Mu=Object.create(null);Mu.version="1.0.0",Mu.struct=Ur,Mu.verify=wu,Mu.atom=ku(uu),Mu.view=ku(Da),Mu.model=ku(Li),Mu.atom.extend=Nu(uu),Mu.view.extend=Nu(Da),Mu.model.extend=Nu(Li);var Pu=Object.freeze(Mu);return Pu}));
